(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[246],{33908:function(e,t,n){"use strict";n.d(t,{K:function(){return b},w:function(){return K}});var i=n(33028),r=n(32723),s=n(34795),a=n(96234),o=n(59740),l=n(60319),d=n(80018),c=n(20356),u=n(47515),p=n(83473),x=n(44229),h=n(22e3),m=n(32667),f=n(78193),g=n(97412),y=n(82182),j=n(22260),v=n(35936),w=["assetKey"],b=function(e){var t=e.assetKey,n=(0,o.Z)(e,w),l=(0,j.m)(),d=t.path.join("/"),g=f.useState(!1),b=(0,a.Z)(g,2),K=b[0],I=b[1],C=f.useRef(),N=f.useCallback((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.current&&clearTimeout(C.current),l(d),I(!0),e.next=5,(0,y.B7)({icon:"done",intent:"primary",message:"Copied asset key!"});case 5:C.current=setTimeout((function(){I(!1)}),2e3);case 6:case"end":return e.stop()}}),e)}))),[l,d]),O=f.useMemo((function(){var e=[{text:"Assets",href:"/assets"}];return t.path.reduce((function(t,n){var i="".concat(t,"/").concat(encodeURIComponent(n));return e.push({text:n,href:i}),i}),"/assets"),e}),[t.path]);return(0,v.jsx)(c.m,(0,i.Z)({title:(0,v.jsxs)(u.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,v.jsx)(A,{items:O,currentBreadcrumbRenderer:function(e){var t=e.text;return(0,v.jsx)(p.X6,{children:t})},breadcrumbRenderer:function(e){var t=e.text,n=e.href;return(0,v.jsx)(p.X6,{children:(0,v.jsx)(z,{to:n||"#",children:t})})}}),(0,v.jsx)(x.u,{placement:"bottom",content:"Copy asset key",children:(0,v.jsx)(E,{onClick:N,children:(0,v.jsx)(h.JO,{name:K?"copy_to_clipboard_done":"copy_to_clipboard",color:m.w.Gray400})})})]})},n))},E=l.ZP.button.withConfig({displayName:"AssetPageHeader__CopyButton",componentId:"sc-1hk7vw2-0"})(["border:none;background:transparent;cursor:pointer;padding:3px;margin-top:2px;:focus{outline:none;}","{transition:background-color 100ms linear;}:hover ","{background-color:",";}"],h.a1,h.a1,m.w.Gray800),K=function(){return(0,v.jsx)(g.rU,{to:"/asset-groups",children:(0,v.jsxs)(u.x,{flex:{gap:4},children:[(0,v.jsx)(h.JO,{color:m.w.Link,name:"schema"}),"View global asset lineage"]})})},A=(0,l.ZP)(d.Oo).withConfig({displayName:"AssetPageHeader__BreadcrumbsWithSlashes",componentId:"sc-1hk7vw2-1"})(["& li:not(:first-child)::after{background:none;font-size:20px;font-weight:bold;color:#5c7080;content:'/';width:8px;line-height:16px;}"]),z=(0,l.ZP)(g.rU).withConfig({displayName:"AssetPageHeader__BreadcrumbLink",componentId:"sc-1hk7vw2-2"})(["color:",";:hover,:active{color:",";}"],m.w.Gray800,m.w.Gray800)},34598:function(e,t,n){"use strict";n.r(t),n.d(t,{AssetsCatalogRoot:function(){return ui},default:function(){return pi}});var i,r,s,a=n(71171),o=n(90239),l=n(31623),d=n(3586),c=n(47515),u=n(62459),p=n(32667),x=n(78193),h=n(50032),m=n(74894),f=n(20822),g=n(67099),y=n(34319),j=n(33908),v=n(33028),w=n(96234),b=n(16185),E=n(17868),K=n(67445),A=n(16255),z=n(95714),I=n(97412),C=n(39707),N=n(40854),O=n(34570),P=n(65778),M=n(50021),S=n(77233),_=n(46860),k=n(12434),Z=n(66708),R=n(63167),D=n(83473),G=n(21189),L=n(22e3),T=n(4537),F=n(24265),W=n(15734),U=n(89622),V=n(92761),B=n(60319),H=n(787),$=n.n(H),J=n(60457),q=n.n(J),Q=n(84674),Y=n(35936),X=function(e){var t=e.event,n=e.observations;if(!t||!t.metadataEntries.length&&(null===n||void 0===n||!n.length))return(0,Y.jsx)(D.YS,{color:p.w.Gray500,children:"No metadata entries"});var i=t.metadataEntries,r=t.timestamp,s=q()((n||[]).flatMap((function(e){return e.metadataEntries.map((function(t){return{timestamp:e.timestamp,runId:e.runId,entry:t}}))})),(function(e){return e.entry.label}));return(0,Y.jsx)(ee,{children:(0,Y.jsx)(te,{children:(0,Y.jsxs)("tbody",{children:[i.map((function(e){return(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{children:(0,Y.jsx)(D.fv,{children:e.label})}),(0,Y.jsx)("td",{children:(0,Y.jsx)(D.fv,{children:(0,Y.jsx)(Q.BL,{entry:e,expandSmallValues:!0})})}),(0,Y.jsx)("td",{style:{opacity:.7},children:e.description})]},"metadata-".concat(e.label))})),s.map((function(e){return(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{children:(0,Y.jsx)(D.fv,{children:e.entry.label})}),(0,Y.jsx)("td",{children:(0,Y.jsx)(D.fv,{children:(0,Y.jsx)(Q.BL,{entry:e.entry,expandSmallValues:!0})})}),(0,Y.jsxs)("td",{style:{opacity:.7},children:[(0,Y.jsxs)(c.x,{children:["Observed in run ",(0,Y.jsx)(I.rU,{to:"/runs/".concat(e.runId,"?timestamp=").concat(r),children:(0,Y.jsx)(D.fv,{children:(0,U.EI)({id:e.runId})})})]}),(0,Y.jsx)(D.YS,{children:"(".concat($()(Number(e.timestamp)).from(Number(r),!0)," later)")}),e.entry.description]})]},"metadata-".concat(e.timestamp,"-").concat(e.entry.label))}))]})})})},ee=B.ZP.div.withConfig({displayName:"AssetEventMetadataEntriesTable__AssetEventMetadataScrollContainer",componentId:"sc-cvsmtb-0"})(["width:100%;overflow-x:auto;"]),te=B.ZP.table.withConfig({displayName:"AssetEventMetadataEntriesTable__AssetEventMetadataTable",componentId:"sc-cvsmtb-1"})(["width:100%;border-spacing:0;border-collapse:collapse;tr td:first-child{max-width:300px;word-wrap:break-word;width:25%;}tr td{border:1px solid ",";padding:8px 12px;font-size:14px;vertical-align:top;}"],p.w.KeylineGray),ne=n(65532),ie=n(12478),re=n(55358),se=function(e){var t,n=e.event,i=e.assetKey,r="Run"===(null===(t=n.runOrError)||void 0===t?void 0:t.__typename)?n.runOrError:null,s=null===r||void 0===r?void 0:r.repositoryOrigin,a=s?(0,Z.kQ)(s.repositoryName,s.repositoryLocationName):null,o=(0,V.Ux)(a),l="MaterializationEvent"===n.__typename?n.assetLineage:[];return(0,Y.jsxs)(c.x,{padding:{horizontal:24,bottom:24},style:{flex:1},children:[(0,Y.jsx)(c.x,{padding:{vertical:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},flex:{alignItems:"center",justifyContent:"space-between"},children:(0,Y.jsx)(D.X6,{children:(0,Y.jsx)(N.E,{timestamp:{ms:Number(n.timestamp)}})})}),(0,Y.jsxs)(c.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16},border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{vertical:16},children:[(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Event"}),"MaterializationEvent"===n.__typename?(0,Y.jsxs)(c.x,{flex:{gap:4},children:[(0,Y.jsx)(L.JO,{name:"materialization"}),"Materialization"]}):(0,Y.jsxs)(c.x,{flex:{gap:4},children:[(0,Y.jsx)(L.JO,{name:"observation"}),"Observation"]})]}),n.partition&&(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Partition"}),(0,Y.jsx)(c.x,{flex:{gap:4},children:n.partition})]}),(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},style:{minHeight:64},children:[(0,Y.jsx)(D.pm,{children:"Run"}),r?(0,Y.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Y.jsx)(W.hk,{runId:r.id,status:r.status}),(0,Y.jsx)(I.rU,{to:(0,U.tA)(r,n),children:(0,Y.jsx)(D.fv,{children:(0,U.EI)(r)})})]}):"\u2014"]}),(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Job"}),r&&!(0,f.pv)(r.pipelineName)?(0,Y.jsxs)(c.x,{children:[(0,Y.jsx)(c.x,{children:(0,Y.jsx)(F.h,{showIcon:!0,pipelineName:r.pipelineName,pipelineHrefContext:a||"repo-unknown",snapshotId:r.pipelineSnapshotId,isJob:(0,V.E8)(o,r.pipelineName)})}),(0,Y.jsxs)(T.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,Y.jsx)(L.JO,{name:"linear_scale",color:p.w.Gray400}),(0,Y.jsx)(I.rU,{to:(0,U.tA)(r,n),children:n.stepKey})]})]}):"\u2014"]})]}),n.description&&(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Description"}),n.description]}),(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Metadata"}),(0,Y.jsx)(X,{event:n})]}),"MaterializationEvent"===n.__typename&&(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Source data"}),(0,Y.jsx)(re.EA,{timestamp:n.timestamp,assetKey:i})]}),(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"System tags"}),(0,Y.jsx)(ne.M,{event:n,collapsible:!0})]}),l.length>0&&(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Parent materializations"}),(0,Y.jsx)(ie.i,{elements:l,timestamp:n.timestamp})]})]})},ae=function(){return(0,Y.jsxs)(c.x,{padding:{horizontal:24},style:{flex:1},children:[(0,Y.jsx)(c.x,{padding:{vertical:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},flex:{alignItems:"center",justifyContent:"space-between"},children:(0,Y.jsx)(D.X6,{color:p.w.Gray400,children:"No event selected"})}),(0,Y.jsxs)(c.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16},border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{vertical:16},children:[(0,Y.jsx)(c.x,{flex:{gap:4,direction:"column"},children:(0,Y.jsx)(D.pm,{children:"Event"})}),(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},style:{minHeight:64},children:[(0,Y.jsx)(D.pm,{children:"Run"}),"\u2014"]}),(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Job"}),"\u2014"]})]}),(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Metadata"}),(0,Y.jsx)(X,{event:null})]})]})},oe=n(50260),le=n(68079),de=n(23555),ce=n(67888),ue=n(92555),pe=n(3077),xe=n(45519),he=function(e){var t=e.hasPartitions,n=e.hasLineage,i=e.groups,r=e.focused,s=e.setFocused;return(0,Y.jsxs)(ce.i,{children:[(0,Y.jsx)("thead",{children:(0,Y.jsxs)("tr",{children:[t&&(0,Y.jsx)("th",{style:{minWidth:100},children:"Partition"}),(0,Y.jsx)("th",{style:{minWidth:150},children:"Timestamp"}),(0,Y.jsx)("th",{style:{minWidth:150},children:"Job"}),(0,Y.jsx)("th",{style:{width:100},children:"Run"})]})}),(0,Y.jsx)("tbody",{children:i.map((function(e){return(0,Y.jsxs)(x.Fragment,{children:[(0,Y.jsx)(ye,{onClick:function(t){t.target instanceof HTMLElement&&t.target.closest("a")||null===s||void 0===s||s(r!==e?e:void 0)},children:(0,Y.jsx)(ge,{group:e,hasPartitions:t,hasLineage:n,isFocused:r===e})}),r===e?(0,Y.jsx)(fe,{hasLineage:n,group:e}):void 0]},e.timestamp||e.partition)}))})]})},me=function(){return(0,Y.jsx)("span",{style:{color:p.w.Gray400},children:"None"})},fe=x.memo((function(e){var t=e.group,n=e.hasLineage,i=t.latest,r=t.timestamp;if(!i)return(0,Y.jsx)("tr",{});var s="MaterializationEvent"===i.__typename?i.assetLineage:[],a="MaterializationEvent"===i.__typename?t.all.filter((function(e){return"ObservationEvent"===e.__typename&&Number(e.timestamp)>Number(i.timestamp)})):[];return(0,Y.jsx)("tr",{style:{background:p.w.Gray50},children:(0,Y.jsxs)("td",{colSpan:6,style:{fontSize:14,padding:0},children:[i.description&&(0,Y.jsx)(c.x,{padding:{horizontal:24,vertical:12},children:i.description}),i.metadataEntries.length||n?(0,Y.jsx)(je,{children:(0,Y.jsxs)("tbody",{children:[i.metadataEntries.map((function(e){return(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{style:{maxWidth:300},children:e.label}),(0,Y.jsx)("td",{children:(0,Y.jsx)(Q.BL,{entry:e,expandSmallValues:!0})}),(0,Y.jsx)("td",{style:{opacity:.7},children:e.description})]},"metadata-".concat(e.label))})),a.map((function(e){return(0,Y.jsx)(x.Fragment,{children:e.metadataEntries.map((function(t){return(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{children:t.label}),(0,Y.jsx)("td",{children:(0,Y.jsx)(Q.BL,{entry:t,expandSmallValues:!0})}),(0,Y.jsxs)("td",{style:{opacity:.7},children:[(0,Y.jsxs)(c.x,{flex:{gap:8,alignItems:"center"},children:[(0,Y.jsx)(L.JO,{name:"observation",size:16}),(0,Y.jsxs)("span",{children:["".concat(e.stepKey," in "),(0,Y.jsx)(I.rU,{to:"/runs/".concat(e.runId,"?timestamp=").concat(e.timestamp),children:(0,Y.jsx)(D.fv,{children:(0,U.EI)({id:e.runId})})})," (".concat($()(Number(e.timestamp)).from(Number(r),!0)," later)")]})]}),t.description]})]},"metadata-".concat(e.timestamp,"-").concat(t.label))}))},e.timestamp)})),n&&r?(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{children:"Parent Materializations"}),(0,Y.jsx)("td",{children:(0,Y.jsx)(ie.i,{elements:s,timestamp:r})})]}):null]})}):(0,Y.jsx)(c.x,{padding:{horizontal:24,vertical:12},children:"No materialization event metadata"})]})})})),ge=x.memo((function(e){var t=e.group,n=e.hasPartitions,i=e.hasLineage,r=e.isFocused,s=t.latest,a=t.partition,o=t.timestamp,l=t.all,d=r?{paddingLeft:4,borderLeft:"4px solid ".concat(p.w.HighlightGreen)}:{paddingLeft:8},u="Run"===(null===s||void 0===s?void 0:s.runOrError.__typename)?s.runOrError:void 0,x=null===u||void 0===u?void 0:u.repositoryOrigin,h=x?(0,Z.kQ)(x.repositoryName,x.repositoryLocationName):null,m=(0,V.Ux)(h);return s?u?(0,Y.jsxs)(Y.Fragment,{children:[n&&(0,Y.jsx)("td",{style:(0,v.Z)({whiteSpace:"nowrap"},d),children:(0,Y.jsxs)(T.Z,{direction:"row",spacing:2,children:[(0,Y.jsx)(we,{open:r}),a||(0,Y.jsx)(me,{})]})}),(0,Y.jsx)("td",{style:n?{}:d,children:(0,Y.jsxs)(T.Z,{direction:"row",spacing:4,children:[!n&&(0,Y.jsx)(we,{open:r}),(0,Y.jsxs)(T.Z,{direction:"column",spacing:4,children:[(0,Y.jsx)(N.E,{timestamp:{ms:Number(o)}}),(null===l||void 0===l?void 0:l.length)>1?(0,Y.jsx)(ve,{hasPartitions:n,hasLineage:i,events:l,children:"View ".concat(l.length," events")}):"MaterializationEvent"===s.__typename?(0,Y.jsxs)(c.x,{flex:{gap:8,alignItems:"center"},style:{color:p.w.Gray600},children:[(0,Y.jsx)(L.JO,{name:"materialization",size:16,color:p.w.Gray600}),"Materialization"]}):(0,Y.jsxs)(c.x,{flex:{gap:8,alignItems:"center"},style:{color:p.w.Gray600},children:[(0,Y.jsx)(L.JO,{name:"observation",size:16,color:p.w.Gray600})," Observation"]})]})]})}),(0,Y.jsx)("td",{children:!(0,f.pv)(u.pipelineName)&&(0,Y.jsxs)(c.x,{margin:{bottom:4},children:[(0,Y.jsx)(c.x,{padding:{left:8},children:(0,Y.jsx)(F.h,{showIcon:!0,pipelineName:u.pipelineName,pipelineHrefContext:h||"repo-unknown",snapshotId:u.pipelineSnapshotId,isJob:(0,V.E8)(m,u.pipelineName)})}),(0,Y.jsxs)(T.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,Y.jsx)(L.JO,{name:"linear_scale",color:p.w.Gray400}),(0,Y.jsx)(I.rU,{to:(0,U.tA)(u,s),children:s.stepKey})]})]})}),(0,Y.jsx)("td",{children:(0,Y.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Y.jsx)(W.hk,{runId:u.id,status:u.status}),(0,Y.jsx)(I.rU,{to:"/runs/".concat(u.id,"?timestamp=").concat(o),children:(0,Y.jsx)(D.fv,{children:(0,U.EI)(u)})})]})})]}):(0,Y.jsx)("span",{}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("td",{style:{whiteSpace:"nowrap",paddingLeft:24},children:a||(0,Y.jsx)(me,{})}),(0,Y.jsx)("td",{colSpan:3})]})})),ye=B.ZP.tr.withConfig({displayName:"AllIndividualEventsLink__HoverableRow",componentId:"sc-jy8lfp-0"})(["&:hover{background:",";}"],p.w.Gray10),je=B.ZP.table.withConfig({displayName:"AllIndividualEventsLink__DetailsTable",componentId:"sc-jy8lfp-1"})(["width:100%;margin:-2px -2px -3px;tr td{font-size:14px;}"]),ve=function(e){var t=e.hasLineage,n=e.hasPartitions,i=e.events,r=e.children,s=x.useState(!1),a=(0,w.Z)(s,2),o=a[0],l=a[1],d=x.useState(),u=(0,w.Z)(d,2),p=u[0],h=u[1],m=x.useMemo((function(){return i.map((function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}}))}),[i]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ue.Z,{onClick:function(){return l(!0)},children:r}),(0,Y.jsxs)(pe.Vq,{isOpen:o,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return l(!1)},style:{width:"80%",minWidth:"800px"},title:function(){if(n&&i[0]){var e=i[0].partition;if(e)return"Materialization and observation events for ".concat(e)}return"Materialization and observation events"}(),children:[o&&(0,Y.jsx)(c.x,{padding:{bottom:8},onClick:function(e){return e.stopPropagation()},children:(0,Y.jsx)(he,{hasLineage:t,hasPartitions:n,focused:p,setFocused:h,groups:m})}),(0,Y.jsx)(pe.cN,{children:(0,Y.jsx)(xe.zx,{intent:"primary",onClick:function(){return l(!1)},children:"OK"})})]})]})},we=function(e){var t=e.open,n=e.onClick;return(0,Y.jsx)(be,{onClick:n,$open:t,children:(0,Y.jsx)(L.JO,{name:"arrow_drop_down",size:24})})},be=B.ZP.button.withConfig({displayName:"AllIndividualEventsLink__DisclosureTriangleButton",componentId:"sc-jy8lfp-2"})(["padding:4px;margin:-4px;cursor:pointer;border:0;background:transparent;outline:none;","{margin:-2px -5px;transform:",";opacity:0.25;}:focus{outline:none;","{background:",";opacity:0.5;}}"],L.a1,(function(e){return e.$open?"rotate(0deg)":"rotate(-90deg)"}),L.a1,p.w.Dark),Ee=n(13167),Ke=n(44435),Ae=function(e){var t=(0,o.a)(ze,{variables:{assetKey:e.assetKey,partitionKey:e.partitionKey}}),n=x.useMemo((function(){var e,n;return"AssetNode"!==(null===(e=t.data)||void 0===e||null===(n=e.assetNodeOrError)||void 0===n?void 0:n.__typename)?{materializations:[],observations:[],hasLineage:!1,latestRunForPartition:null}:{stepKey:(0,f.Ec)(t.data.assetNodeOrError),latestRunForPartition:t.data.assetNodeOrError.latestRunForPartition,materializations:(0,le.Z)(t.data.assetNodeOrError.assetMaterializations).sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)})),observations:(0,le.Z)(t.data.assetNodeOrError.assetObservations).sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)})),hasLineage:t.data.assetNodeOrError.assetMaterializations.some((function(e){return e.assetLineage.length>0}))}}),[t.data]),i=n.stepKey,r=n.latestRunForPartition,s=n.materializations,a=n.observations,l=n.hasLineage,d=s[0];return!t.loading&&t.data&&d?(0,Y.jsx)(Ie,{assetKey:e.assetKey,stepKey:i,latestRunForPartition:r,hasLineage:l,group:{latest:d,timestamp:d.timestamp,partition:e.partitionKey,all:[].concat((0,le.Z)(s),(0,le.Z)(a)).sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))}}):(0,Y.jsx)(Ce,{partitionKey:e.partitionKey})},ze=(0,l.Ps)(i||(i=(0,a.Z)(["\n  query AssetPartitionDetailQuery($assetKey: AssetKeyInput!, $partitionKey: String!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        opNames\n        latestRunForPartition(partition: $partitionKey) {\n          id\n          ...AssetPartitionLatestRunFragment\n        }\n        assetMaterializations(partitions: [$partitionKey]) {\n          ... on MaterializationEvent {\n            runId\n            ...AssetMaterializationFragment\n          }\n        }\n        assetObservations(partitions: [$partitionKey]) {\n          ... on ObservationEvent {\n            runId\n            ...AssetObservationFragment\n          }\n        }\n      }\n    }\n  }\n  fragment AssetPartitionLatestRunFragment on Run {\n    id\n    status\n    endTime\n  }\n\n  ","\n  ","\n"])),Ke.ZC,Ke.T8),Ie=function(e){var t,n=e.assetKey,i=e.stepKey,r=e.group,s=e.hasLineage,a=e.hasLoadingState,o=e.latestRunForPartition,l=r.latest,d=r.partition,x=r.all,h="Run"===(null===l||void 0===l||null===(t=l.runOrError)||void 0===t?void 0:t.__typename)?l.runOrError:null,m=(null===o||void 0===o?void 0:o.id)!==(null===h||void 0===h?void 0:h.id)?o:null,g=(null===m||void 0===m?void 0:m.status)===de.VOA.STARTED?"has started and is refreshing this partition.":(null===m||void 0===m?void 0:m.status)===de.VOA.STARTING?"is starting and will refresh this partition.":(null===m||void 0===m?void 0:m.status)===de.VOA.QUEUED?"is queued and is refreshing this partition.":void 0,y=null===h||void 0===h?void 0:h.repositoryOrigin,j=y?(0,Z.kQ)(y.repositoryName,y.repositoryLocationName):null,v=(0,V.Ux)(j),w="MaterializationEvent"===(null===l||void 0===l?void 0:l.__typename)?r.all.filter((function(e){return"ObservationEvent"===e.__typename&&Number(e.timestamp)>Number(l.timestamp)})):[],b=l?x.slice(x.indexOf(l)):x;return(0,Y.jsxs)(c.x,{padding:{horizontal:24,bottom:24},style:{flex:1},children:[(0,Y.jsxs)(c.x,{padding:{vertical:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},flex:{alignItems:"center"},children:[d?(0,Y.jsxs)(c.x,{flex:{gap:12,alignItems:"center"},children:[(0,Y.jsx)(D.X6,{children:d}),a?(0,Y.jsx)(u.$,{purpose:"body-text"}):l&&(0,Y.jsx)(z.V,{intent:"success",children:"Materialized"})]}):(0,Y.jsx)(D.X6,{color:p.w.Gray400,children:"No partition selected"}),(0,Y.jsx)("div",{style:{flex:1}})]}),(null===m||void 0===m?void 0:m.status)===de.VOA.FAILURE&&(0,Y.jsx)(Ee.Z,{run:m,stepKey:i,padding:{horizontal:0,vertical:16},border:{side:"bottom",width:1,color:p.w.KeylineGray}}),m&&g&&(0,Y.jsx)(A.b,{intent:"info",icon:(0,Y.jsx)(u.$,{purpose:"body-text"}),title:(0,Y.jsxs)("div",{style:{fontWeight:400},children:["Run ",(0,Y.jsx)(I.rU,{to:"/runs/".concat(m.id),children:(0,U.EI)(m)})," ",g]})}),(0,Y.jsxs)(c.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16,minHeight:76},border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{vertical:16},children:[l?(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"MaterializationEvent"===l.__typename?"Latest materialization":"Latest observation"}),(0,Y.jsxs)(c.x,{flex:{gap:4},style:{whiteSpace:"nowrap"},children:["MaterializationEvent"===l.__typename?(0,Y.jsx)(L.JO,{name:"materialization"}):(0,Y.jsx)(L.JO,{name:"observation"}),(0,Y.jsx)(N.E,{timestamp:{ms:Number(l.timestamp)}}),b.length>0&&(0,Y.jsx)(ve,{hasPartitions:!0,hasLineage:s,events:x,children:"(".concat(b.length-1," prior ").concat(b.length-1===1?"event":"events",")")})]})]}):(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Latest materialization"}),(0,Y.jsxs)(c.x,{flex:{gap:4},children:[(0,Y.jsx)(L.JO,{name:"materialization"}),"None"]})]}),(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Run"}),h&&l?(0,Y.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Y.jsx)(W.hk,{runId:h.id,status:h.status}),(0,Y.jsx)(I.rU,{to:(0,U.tA)(h,l),children:(0,Y.jsx)(D.fv,{children:(0,U.EI)(h)})})]}):"None"]}),(0,Y.jsxs)(c.x,{flex:{gap:4,direction:"column"},children:[(0,Y.jsx)(D.pm,{children:"Job"}),l&&h&&!(0,f.pv)(h.pipelineName)?(0,Y.jsxs)(c.x,{children:[(0,Y.jsx)(c.x,{children:(0,Y.jsx)(F.h,{showIcon:!0,pipelineName:h.pipelineName,pipelineHrefContext:j||"repo-unknown",snapshotId:h.pipelineSnapshotId,isJob:(0,V.E8)(v,h.pipelineName)})}),(0,Y.jsxs)(T.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,Y.jsx)(L.JO,{name:"linear_scale",color:p.w.Gray400}),(0,Y.jsx)(I.rU,{to:(0,U.tA)(h,l),children:l.stepKey})]})]}):"None"]})]}),(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Metadata"}),(0,Y.jsx)(X,{event:l,observations:w})]}),(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Source data"}),(0,Y.jsx)(re.EA,{timestamp:null===l||void 0===l?void 0:l.timestamp,assetKey:n})]}),(0,Y.jsxs)(c.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,Y.jsx)(D.pm,{children:"System tags"}),(0,Y.jsx)(ne.M,{event:l,collapsible:!0})]})]})},Ce=function(e){var t=e.partitionKey;return(0,Y.jsx)(Ie,{assetKey:{path:[""]},group:{all:[],latest:null,timestamp:"0",partition:t},latestRunForPartition:null,hasLineage:!1,hasLoadingState:!0})},Ne=n(15117),Oe=n(51294),Pe=function(e){var t=e.assetKey,n=e.assetNode,i=e.params,r=e.setParams,s=e.liveData,a=e.dataRefreshHint,o=(0,Ke.fE)(t,i,{assetHasDefinedPartitions:!1}),l=o.xAxis,d=o.materializations,h=o.observations,m=o.loadedPartitionKeys,g=o.refetch,y=o.loading;x.useEffect((function(){i.asOf||g()}),[i.asOf,a,g]);var j=(0,Oe.L)(l,d,h,m),w=function(e){var t="time"===l?{time:(null===e||void 0===e?void 0:e.timestamp)!==i.time&&(null===e||void 0===e?void 0:e.timestamp)||""}:{partition:(null===e||void 0===e?void 0:e.partition)!==i.partition&&(null===e||void 0===e?void 0:e.partition)||""};r((0,v.Z)((0,v.Z)({},i),t))},b=j.find((function(e){return i.time?Number(e.timestamp)<=Number(i.time):!!i.partition&&e.partition===i.partition}))||j[0],K=!(null!==n&&void 0!==n&&n.partitionDefinition)&&j.some((function(e){return e.partition})),A=d.some((function(e){return e.assetLineage.length>0}));return(0,Y.jsxs)(Y.Fragment,{children:[K&&(0,Y.jsxs)(c.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{vertical:16,horizontal:24},style:{marginBottom:-1},children:[(0,Y.jsx)(D.pm,{children:"Asset Events"}),(0,Y.jsx)("div",{style:{margin:"-6px 0 "},children:(0,Y.jsx)(G.h,{activeItems:new Set([l]),buttons:[{id:"partition",label:"By partition"},{id:"time",label:"By timestamp"}],onClick:function(e){return r("time"===e?(0,v.Z)((0,v.Z)({},i),{},{partition:void 0,time:(null===b||void 0===b?void 0:b.timestamp)||""}):(0,v.Z)((0,v.Z)({},i),{},{partition:(null===b||void 0===b?void 0:b.partition)||"",time:void 0}))}})})]}),n&&!n.partitionDefinition&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Ee.Z,{stepKey:(0,f.Ec)(n),border:{side:"bottom",width:1,color:p.w.KeylineGray},run:(null===s||void 0===s?void 0:s.runWhichFailedToMaterialize)||null}),(0,Y.jsx)(Ne.j,{stepKey:(0,f.Ec)(n),border:{side:"bottom",width:1,color:p.w.KeylineGray},liveData:s})]}),(0,Y.jsxs)(c.x,{style:{flex:1,minHeight:0,outline:"none"},flex:{direction:"row"},onKeyDown:function(e){var t={ArrowDown:1,ArrowUp:-1}[e.key];if(t&&b&&!e.isDefaultPrevented()){var n=j[j.indexOf(b)+t];n&&(e.preventDefault(),w(n))}},tabIndex:-1,children:[(0,Y.jsx)(c.x,{style:{display:"flex",flex:1,minWidth:200},flex:{direction:"column"},background:p.w.Gray50,children:y?(0,Y.jsx)(c.x,{flex:{alignItems:"center",justifyContent:"center"},style:{flex:1},children:(0,Y.jsx)(u.$,{purpose:"section"})}):(0,Y.jsx)(oe.cJ,{xAxis:l,groups:j,focused:b,setFocused:w})}),(0,Y.jsx)(c.x,{flex:{direction:"column"},style:{flex:3,minWidth:0,overflowY:"auto"},border:{side:"left",color:p.w.KeylineGray,width:1},children:(0,Y.jsx)(E.S,{region:"event",resetErrorOnChange:[b],children:"partition"===l?b?(0,Y.jsx)(Ie,{group:b,hasLineage:A,assetKey:t,stepKey:n?(0,f.Ec)(n):void 0,latestRunForPartition:null}):(0,Y.jsx)(Ce,{}):null!==b&&void 0!==b&&b.latest?(0,Y.jsx)(se,{assetKey:t,event:b.latest}):(0,Y.jsx)(ae,{})})})]})]})},Me=n(86741),Se=n(1497),_e=n(27954),ke=n(54665),Ze=n(54335),Re=n(27409),De=n(69040),Ge=n(46634),Le=n(85514),Te=function(e){var t=e.items,n=e.liveDataByNode,i=(0,h.k6)();return null===t?(0,Y.jsx)(Fe,{flex:{alignItems:"center",justifyContent:"center"},children:(0,Y.jsx)(u.$,{purpose:"section"})}):(0,Y.jsx)(Fe,{flex:{gap:4},padding:{horizontal:12},children:t.map((function(e){return(0,Y.jsx)(We,{onClick:function(t){t.stopPropagation(),i.push((0,Le.p)(e.assetKey,{view:"definition"}))},children:(0,Y.jsx)(Se.p4,{definition:e,selected:!1,liveData:n[(0,f.Wu)(e.assetKey)]})},e.id)}))})},Fe=(0,B.ZP)(c.x).withConfig({displayName:"AssetNodeList__Container",componentId:"sc-1ee72i3-0"})(["height:154px;overflow-x:auto;width:100%;white-space:nowrap;"]),We=B.ZP.div.withConfig({displayName:"AssetNodeList__AssetNodeWrapper",componentId:"sc-1ee72i3-1"})(["cursor:pointer;width:260px;flex-shrink:0;"]),Ue=n(8078),Ve=n(17163),Be=n(76144),He=n(64869),$e=n(95460),Je=function(e){var t,n=e.assetNode,i=e.upstream,r=e.downstream,s=e.liveDataByNode,a=e.dependsOnSelf,o=(0,Ge.U6)(n),l=o.assetMetadata,d=o.assetType,u=s[(0,f.Wu)(n.assetKey)],x=null===(t=n.configField)||void 0===t?void 0:t.configType,h=x&&"Any"!==x.key?x:null,m=(0,Z.kQ)(n.repository.name,n.repository.location.name);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(De.N,{assetKey:n.assetKey,loadedFromRepo:m,padded:!0}),(0,Y.jsxs)(c.x,{flex:{direction:"row"},style:{flex:1},children:[(0,Y.jsxs)(c.x,{style:{flex:1,minWidth:0},flex:{direction:"column"},border:{side:"right",width:1,color:p.w.KeylineGray},children:[(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,Y.jsx)(D.pm,{children:"Description"}),(0,Y.jsx)(qe,{assetNode:n,repoAddress:m})]}),(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},style:{flex:1,flexBasis:"content",flexGrow:0,minHeight:123},children:n.description?(0,Y.jsx)(ke.d,{description:n.description,maxHeight:260}):(0,Y.jsx)(D.uT,{children:"No description provided"})}),n.opVersion&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Code version"})}),(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"center"},children:(0,Y.jsx)($e.G,{children:n.opVersion})})]}),n.freshnessPolicy&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Freshness policy"})}),(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:[(0,Y.jsx)(D.uT,{style:{flex:1},children:(0,Be.jY)(n.freshnessPolicy)}),(0,Y.jsx)(Be.CW,{liveData:u,policy:n.freshnessPolicy,assetKey:n.assetKey})]})]}),n.autoMaterializePolicy&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Auto-materialize policy"})}),(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:[(0,Y.jsx)(D.uT,{style:{flex:1},children:(0,Ue.r)(n.autoMaterializePolicy)}),(0,Y.jsx)(Ue.W,{policy:n.autoMaterializePolicy})]})]}),(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:p.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,Y.jsxs)(D.pm,{children:["Upstream assets",null!==i&&void 0!==i&&i.length?" (".concat(i.length,")"):""]}),(0,Y.jsx)(I.rU,{to:"?view=lineage&lineageScope=upstream",children:(0,Y.jsxs)(c.x,{flex:{gap:4,alignItems:"center"},children:["View upstream graph",(0,Y.jsx)(L.JO,{name:"open_in_new",color:p.w.Link})]})})]}),a&&(0,Y.jsx)(Ve.x,{}),(0,Y.jsx)(Te,{items:i,liveDataByNode:s}),(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:p.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,Y.jsxs)(D.pm,{children:["Downstream assets",null!==r&&void 0!==r&&r.length?" (".concat(r.length,")"):""]}),(0,Y.jsx)(I.rU,{to:"?view=lineage&lineageScope=downstream",children:(0,Y.jsxs)(c.x,{flex:{gap:4,alignItems:"center"},children:["View downstream graph",(0,Y.jsx)(L.JO,{name:"open_in_new",color:p.w.Link})]})})]}),(0,Y.jsx)(Te,{items:r,liveDataByNode:s}),(0,Y.jsx)("div",{style:{flex:1}})]}),(0,Y.jsxs)(c.x,{border:{side:"vertical",width:1,color:p.w.KeylineGray},style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Required Resources"})}),(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[n.requiredResources.map((function(e){return(0,Y.jsxs)(Ze.b1,{children:[(0,Y.jsx)(L.JO,{name:"resource",color:p.w.Gray700}),m?(0,Y.jsx)(I.rU,{to:(0,R.$U)(m,"/resources/".concat(e.resourceKey)),children:(0,Y.jsx)(Ze.bZ,{children:e.resourceKey})}):(0,Y.jsx)(Ze.bZ,{children:e.resourceKey})]},e.resourceKey)})),0===n.requiredResources.length&&(0,Y.jsxs)(D.uT,{children:["No required resources to display",(0,Y.jsx)(c.x,{padding:{top:4},children:(0,Y.jsx)("a",{href:"https://docs.dagster.io/concepts/resources#using-software-defined-assets",children:"View documentation"})})]})]})]}),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Config"})}),(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:h?(0,Y.jsx)(Me.L,{type:h,typesInScope:h.recursiveConfigTypes}):(0,Y.jsxs)(D.uT,{children:["No config schema defined",(0,Y.jsx)(c.x,{padding:{top:4},children:(0,Y.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#asset-configuration",children:"View documentation"})})]})})]}),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Type"})}),d&&"Any"!==d.displayName?(0,Y.jsx)(_e.Ot,{type:d}):(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},children:(0,Y.jsxs)(D.uT,{children:["No input and output type data defined",(0,Y.jsx)(c.x,{padding:{top:4},children:(0,Y.jsx)("a",{href:"https://docs.dagster.io/concepts/types#overview",children:"View documentation"})})]})})]}),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:p.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,Y.jsx)(D.pm,{children:"Metadata"})}),(0,Y.jsx)(c.x,{style:{flex:1},children:l.length>0?(0,Y.jsx)(Ge.mQ,{assetMetadata:l,repoLocation:null===m||void 0===m?void 0:m.location}):(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},children:(0,Y.jsxs)(D.uT,{children:["No asset definition metadata defined",(0,Y.jsx)(c.x,{padding:{top:4},children:(0,Y.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#attaching-definition-metadata",children:"View documentation"})})]})})})]})]})]})]})},qe=function(e){var t=e.assetNode,n=e.repoAddress;return(0,Y.jsxs)(c.x,{flex:{alignItems:"baseline",gap:16,wrap:"wrap"},style:{lineHeight:0},children:[t.jobNames.filter((function(e){return!(0,f.pv)(e)})).map((function(e){return(0,Y.jsx)(D.fv,{children:(0,Y.jsx)(F.h,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:n})},e)})),(0,Y.jsx)(He.d,{assetNode:t,repoAddress:n}),t.isSource&&(0,Y.jsx)(D.YS,{style:{lineHeight:"16px",marginTop:2},children:"Source Asset"})]})},Qe=(0,l.Ps)(r||(r=(0,a.Z)(["\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    description\n    graphName\n    opNames\n    opVersion\n    jobNames\n    autoMaterializePolicy {\n      policyType\n    }\n    freshnessPolicy {\n      maximumLagMinutes\n      cronSchedule\n      cronScheduleTimezone\n    }\n\n    partitionDefinition {\n      description\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeConfigFragment\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ","\n  ","\n  ","\n"])),Re.r,Se.zU,Ge.Ws),Ye=n(92578),Xe=n.n(Ye),et=n(73765),tt=n(26756),nt=n(20876),it=function(e){var t=e.assetNode,n=e.repoAddress,i=Xe()(t.jobs,(function(e){return e.schedules})),r=Xe()(t.jobs,(function(e){return e.sensors}));return(0,Y.jsx)(et.I,{repoAddress:n,schedules:i,sensors:r,showSwitch:!1})},rt=(0,l.Ps)(s||(s=(0,a.Z)(["\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    jobs {\n      id\n      name\n      schedules {\n        id\n\n        ...ScheduleSwitchFragment\n      }\n      sensors {\n        id\n\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n"])),tt.J,nt.U),st=n(80923),at=n(1035),ot=n(14228),lt=n(3060),dt=n(7055),ct=n(1018),ut=n(21916),pt=n(79962),xt="lineageGraphZoomLevel",ht=function(e){var t=e.assetKey,n=e.assetGraphData,i=e.liveDataByNode,r=e.params,s=(0,f.Wu)(t),a=x.useState(null),o=(0,w.Z)(a,2),l=o[0],d=o[1],p=(0,ut.oJ)(n),m=p.layout,g=p.loading,y=x.useRef(),j=(0,h.k6)();return x.useEffect((function(){if(y.current&&m){var e=Number((0,pt.n)(xt));y.current.autocenter(!1,e),y.current.focus()}}),[y,m,s]),!m||g?(0,Y.jsx)(c.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,Y.jsx)(u.$,{purpose:"page"})}):(0,Y.jsx)(ct.l,{ref:function(e){return y.current=e||void 0},interactor:ct.l.Interactors.PanAndZoom,defaultZoom:"zoom-to-fit",graphWidth:m.width,graphHeight:m.height,onDoubleClick:function(e){var t;null===(t=y.current)||void 0===t||t.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1.2,children:function(e){var t=e.scale;return(0,Y.jsxs)(ft,{width:m.width,height:m.height,children:[y.current&&(0,Y.jsx)(mt,{scale:t}),(0,Y.jsx)(at.i,{highlighted:l,edges:m.edges}),Object.values(m.groups).sort((function(e,t){return e.id.length-t.id.length})).map((function(e){return(0,x.createElement)("foreignObject",(0,v.Z)((0,v.Z)({},e.bounds),{},{key:e.id}),(0,Y.jsx)(lt.l,{group:e,scale:t}))})),Object.values(m.nodes).map((function(e){var a=e.id,o=e.bounds,l=n.nodes[a],c=JSON.parse(a);return(0,x.createElement)("foreignObject",(0,v.Z)((0,v.Z)({},o),{},{key:a,style:{overflow:"visible"},onMouseEnter:function(){return d(a)},onMouseLeave:function(){return d(null)},onClick:function(){return e={path:c},void j.push((0,Le.p)(e,(0,v.Z)((0,v.Z)({},r),{},{lineageScope:"neighbors"})));var e},onDoubleClick:function(e){var t;null===(t=y.current)||void 0===t||t.zoomToSVGBox(o,!0,1.2),e.stopPropagation()}}),l?t<ot.CZ?(0,Y.jsx)(Se.t$,{definition:l.definition,liveData:i[l.id],selected:l.id===s}):(0,Y.jsx)(Se.p4,{definition:l.definition,liveData:i[l.id],selected:l.id===s}):(0,Y.jsx)(dt.w,{assetKey:{path:c}}))}))]})}})},mt=function(e){var t=e.scale;return x.useEffect((function(){try{window.localStorage.setItem(xt,JSON.stringify(t))}catch(e){}}),[t]),(0,Y.jsx)(Y.Fragment,{})},ft=B.ZP.svg.withConfig({displayName:"AssetNodeLineageGraph__SVGContainer",componentId:"sc-q47dxd-0"})(["overflow:visible;border-radius:0;"]),gt=n(30559),yt=function(e){var t=e.params,n=e.setParams,i=e.assetKey,r=e.liveDataByNode,s=e.assetGraphData,a=e.graphQueryItems,o=e.requestedDepth,l=x.useMemo((function(){return(0,O.BK)(a,i)}),[a,i]),d="upstream"===t.lineageScope?l.upstream:"downstream"===t.lineageScope?l.downstream:Math.max(l.upstream,l.downstream),u=Math.max(1,Math.min(d,o));return(0,Y.jsxs)(c.x,{style:{width:"100%",flex:1,minHeight:0,position:"relative"},flex:{direction:"column"},children:[(0,Y.jsxs)(c.x,{flex:{justifyContent:"space-between",alignItems:"center",gap:12},padding:{left:24,right:12,vertical:12},border:{side:"bottom",color:p.w.KeylineGray,width:1},children:[(0,Y.jsx)(G.h,{activeItems:new Set([t.lineageScope||"neighbors"]),buttons:[{id:"neighbors",label:"Nearest Neighbors",icon:"graph_neighbors"},{id:"upstream",label:"Upstream",icon:"graph_upstream"},{id:"downstream",label:"Downstream",icon:"graph_downstream"}],onClick:function(e){return n((0,v.Z)((0,v.Z)({},t),{},{lineageScope:e,lineageDepth:void 0}))}}),(0,Y.jsx)(vt,{value:u,onChange:function(e){return n((0,v.Z)((0,v.Z)({},t),{},{lineageDepth:e}))},max:d}),(0,Y.jsx)("div",{style:{flex:1}}),Object.values(s.nodes).length>1?(0,Y.jsx)(gt.XE,{intent:"none",liveDataForStale:r,scope:{all:Object.values(s.nodes).map((function(e){return e.definition}))}}):(0,Y.jsx)(xe.zx,{icon:(0,Y.jsx)(L.JO,{name:"materialization"}),disabled:!0,children:"Materialize all"})]}),u<d&&(0,Y.jsx)(jt,{children:"Not all upstream/downstream assets shown. Increase the depth to show more."}),(0,Y.jsx)(ht,{assetKey:i,liveDataByNode:r,assetGraphData:s,params:t})]})},jt=B.ZP.div.withConfig({displayName:"AssetNodeLineage__DepthHidesAssetsNotice",componentId:"sc-1kyddw2-0"})(["background:",";border-radius:8px;color:",";align-items:center;display:flex;padding:4px 8px;gap:4px;position:absolute;right:12px;top:70px;z-index:2;"],p.w.Gray100,p.w.Gray500),vt=function(e){var t=e.value,n=e.max,i=e.onChange,r=x.useState("".concat(t)),s=(0,w.Z)(r,2),a=s[0],o=s[1];x.useEffect((function(){o("".concat(t))}),[t]);var l=function(){var e=Number(a)?Math.min(n,Number(a)):t;i(e)};return(0,Y.jsxs)(c.x,{flex:{gap:8,alignItems:"center"},children:["Graph depth",(0,Y.jsxs)(xe.zH,{children:[(0,Y.jsx)(xe.zx,{disabled:t<=1,onClick:function(){return i(t-1)},icon:(0,Y.jsx)(L.JO,{name:"subtract"})}),(0,Y.jsx)(st.oi,{min:1,max:n,disabled:n<=1,inputMode:"numeric",style:{width:40,marginLeft:-1,textAlign:"center",height:32,padding:6,borderRadius:0,boxShadow:"none",border:"1px solid ".concat(p.w.Gray300)},value:a,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){return"Enter"===e.key||"Return"===e.key?l():void 0},onBlur:function(){return l()}},t),(0,Y.jsx)(xe.zx,{disabled:t>=n,onClick:function(){return i(t+1)},icon:(0,Y.jsx)(L.JO,{name:"add"})}),(0,Y.jsx)(xe.zx,{disabled:t>=n,onClick:function(){return i(n)},children:"All"})]})]})},wt=n(73070),bt=n(85357),Et=n(44229),Kt=n(8236),At=n.n(Kt),zt=n(23662),It=n.n(zt),Ct=n(28832),Nt=n(97186),Ot=n(18517),Pt=n(99772),Mt=n(87519),St=n(17914),_t=function(e){var t=e.counts,n=e.value,i=e.onChange,r=e.allowed,s=e.disabled;return(0,Y.jsx)(c.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:r.map((function(e){return(0,Y.jsx)(St.X,{"data-testid":(0,Ot.N)("partition-status-".concat(e,"-checkbox")),disabled:s,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:n.includes(e)&&!s,label:"".concat((0,Mt.be)(e)," (").concat(t[e],")"),onChange:function(){return i(n.includes(e)?n.filter((function(t){return t!==e})):[].concat((0,le.Z)(n),[e]))}},e)}))})},kt=n(30557),Zt=n(45129),Rt=n(52072);var Dt=[Mt.yo.MISSING,Mt.yo.MATERIALIZING,Mt.yo.MATERIALIZED,Mt.yo.FAILED].sort(),Gt=function(e){return e[e.CREATION=0]="CREATION",e[e.REVERSE_CREATION=1]="REVERSE_CREATION",e[e.ALPHABETICAL=2]="ALPHABETICAL",e[e.REVERSE_ALPHABETICAL=3]="REVERSE_ALPHABETICAL",e}(Gt||{}),Lt=function(e){var t=e.assetKey,n=e.assetPartitionDimensions,i=e.params,r=e.setParams,s=e.dataRefreshHint,a=(0,Rt.mR)([t],s)[0],o=(0,Zt.q)({knownDimensionNames:n,modifyQueryString:!0,assetHealth:a,shouldReadPartitionQueryStringParam:!1}),l=(0,w.Z)(o,2),d=l[0],h=l[1],m=x.useState([]),f=(0,w.Z)(m,2),g=f[0],y=f[1],j=(0,_.q)({defaults:{status:(0,le.Z)(Dt).sort().join(",")},encode:function(e){return{status:(0,le.Z)(e).sort().join(",")}},decode:function(e){return(e.status||"").split(",").filter((function(e){return Dt.includes(e)}))}}),b=(0,w.Z)(j,2),E=b[0],K=b[1],A=d.findIndex((function(e){return(0,kt.nv)(e.dimension)})),z=function(e){var t=e.params,n=e.setParams,i=e.dimensionCount,r=e.defaultKeyInDimension,s=x.useMemo((function(){return t.partition?i>1?t.partition.split("|").filter(Boolean):[t.partition]:[]}),[i,t.partition]);return[s,function(e,i){for(var a=[],o=0;o<e;o++)a.push(s[o]||r(o));i&&a.push(i),n((0,v.Z)((0,v.Z)({},t),{},{partition:a.join("|")}))}]}({params:i,setParams:r,dimensionCount:d.length,defaultKeyInDimension:function(e){return P(e)[0]}}),I=(0,w.Z)(z,2),C=I[0],N=I[1],O=x.useMemo((function(){return a?d.map((function(e,t){return a.rangesForSingleDimension(t,1===t&&C[0]?[(0,Rt.mC)(C[0],d[0].dimension)]:-1!==A&&t!==A?d[A].selectedRanges:void 0)})):d.map((function(){return[]}))}),[a,d,A,C]),P=function(e){if(!d[e])return[];if(-1!==A&&0===d[A].selectedRanges.length)return[];var t=d[e],n=t.dimension,i=t.selectedRanges,r=n.partitionKeys,s=Wt(g,e,d[e].dimension.type),a=function(){return It()(i.flatMap((function(e){var t=e.start,n=e.end;return r.slice(t.idx,n.idx+1)})))};if(At()(Dt,E))return Ft(a(),s);var o,l,c=(0,Rt.tP)(O[e],i),u=It()((o=E.filter((function(e){return e!==Mt.yo.MISSING})),c.flatMap((function(e){return o.some((function(t){return e.value.includes(t)}))?r.slice(e.start.idx,e.end.idx+1):[]}))));if(E.includes(Mt.yo.MISSING)){var p=a();l=r.filter((function(e,t){return p.includes(e)&&(u.includes(e)||function(e){return!c.some((function(t){return t.start.idx<=e&&t.end.idx>=e&&!t.value.includes(Mt.yo.MISSING)}))}(t))}))}else l=u;return Ft(l,s)},M=(0,Rt.CA)(a,d),S=E.reduce((function(e,t){return e+M[t]}),0);return(0,Y.jsxs)(Y.Fragment,{children:[-1!==A&&(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(Nt.x,{partitionKeys:d[A].dimension.partitionKeys,health:{ranges:O[A]},selected:d[A].selectedKeys,setSelected:function(e){return h(d.map((function(t,n){return n===A?(0,v.Z)((0,v.Z)({},t),{},{selectedKeys:e}):t})))},dimensionType:d[A].dimension.type})}),(0,Y.jsxs)(c.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between"},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[(0,Y.jsxs)("div",{"data-testid":(0,Ot.N)("partitions-selected"),children:[S.toLocaleString()," Partitions Selected"]}),(0,Y.jsx)(_t,{counts:M,allowed:Dt,value:E,onChange:K})]}),(0,Y.jsxs)(c.x,{style:{flex:1,minHeight:0,outline:"none"},flex:{direction:"row"},tabIndex:-1,children:[d.map((function(e,t){var n=Wt(g,t,e.dimension.type);return(0,Y.jsxs)(c.x,{style:{display:"flex",flex:1,paddingRight:1,minWidth:200},flex:{direction:"column"},border:{side:"right",color:p.w.KeylineGray,width:1},background:p.w.Gray50,"data-testid":(0,Ot.N)("partitions-".concat(e.dimension.name)),children:[(0,Y.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},background:p.w.White,border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{horizontal:24,vertical:8},children:[(0,Y.jsx)("div",{children:"default"!==e.dimension.name&&(0,Y.jsxs)(c.x,{flex:{gap:8,alignItems:"center"},children:[(0,Y.jsx)(L.JO,{name:"partition"}),(0,Y.jsx)(D.pm,{children:e.dimension.name})]})}),(0,Y.jsx)(wt.J,{content:(0,Y.jsxs)(bt.v2,{children:[(0,Y.jsx)(bt.sN,{text:(0,Y.jsx)(Et.u,{content:"The order in which partitions were created",children:(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,Y.jsx)("span",{children:"Creation sort"}),(0,Y.jsx)(L.JO,{name:"info"})]})}),active:Gt.CREATION===n,onClick:function(){y((function(e){var n=(0,le.Z)(e);return n[t]=Gt.CREATION,n}))},"data-testId":(0,Ot.N)("sort-creation")}),(0,Y.jsx)(bt.sN,{text:(0,Y.jsx)(Et.u,{content:"The order in which partitions were created, reversed",children:(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,Y.jsx)("span",{children:"Reverse creation sort"}),(0,Y.jsx)(L.JO,{name:"info"})]})}),active:Gt.REVERSE_CREATION===n,onClick:function(){y((function(e){var n=(0,le.Z)(e);return n[t]=Gt.REVERSE_CREATION,n}))},"data-testId":(0,Ot.N)("sort-reverse-creation")}),(0,Y.jsx)(bt.sN,{text:"Alphabetical sort",active:Gt.ALPHABETICAL===n,onClick:function(){y((function(e){var n=(0,le.Z)(e);return n[t]=Gt.ALPHABETICAL,n}))},"data-testId":(0,Ot.N)("sort-alphabetical")}),(0,Y.jsx)(bt.sN,{text:"Reverse alphabetical sort",active:Gt.REVERSE_ALPHABETICAL===n,onClick:function(){y((function(e){var n=(0,le.Z)(e);return n[t]=Gt.REVERSE_ALPHABETICAL,(0,le.Z)(n)}))},"data-testId":(0,Ot.N)("sort-reverse-alphabetical")})]}),position:"bottom-left",children:(0,Y.jsx)(Ct.Kz,{style:{marginRight:"-16px"},"data-testid":"sort-".concat(t),children:(0,Y.jsx)(L.JO,{name:"sort_by_alpha",color:p.w.Gray400})})})]}),a?(0,Y.jsx)(Pt.k,{partitions:P(t),statusForPartition:function(n){if(1===t&&C[0])return[a.stateForKey([C[0],n])];var i=e.dimension.partitionKeys.indexOf(n);return(0,Rt.h1)(O[t],i).filter((function(e){return E.includes(e)}))},focusedDimensionKey:C[t],setFocusedDimensionKey:function(e){N(t,e)}}):(0,Y.jsx)(c.x,{flex:{alignItems:"center",justifyContent:"center"},style:{flex:1},children:(0,Y.jsx)(u.$,{purpose:"section"})})]},e.dimension.name)})),(0,Y.jsx)(c.x,{style:{flex:3,minWidth:0,overflowY:"auto"},flex:{direction:"column"},children:i.partition&&C.length===d.length?(0,Y.jsx)(Ae,{assetKey:t,partitionKey:i.partition}):(0,Y.jsx)(Ce,{})})]})]})},Tt=new Intl.Collator(navigator.language,{sensitivity:"base"});function Ft(e,t){switch(t){case Gt.CREATION:return e;case Gt.REVERSE_CREATION:return(0,le.Z)(e).reverse();case Gt.ALPHABETICAL:return(0,le.Z)(e).sort(Tt.compare);case Gt.REVERSE_ALPHABETICAL:return(0,le.Z)(e).sort((function(e,t){return-Tt.compare(e,t)}))}}function Wt(e,t,n){return void 0===e[t]?n===de.iVC.TIME_WINDOW?Gt.REVERSE_CREATION:Gt.CREATION:e[t]}var Ut,Vt,Bt=n(94403),Ht=function(e){var t=e.assetKey,n=e.assetHasDefinedPartitions,i=e.params,r=e.setParams,s=(0,Ke.fE)(t,i,{assetHasDefinedPartitions:n}),a=s.materializations,o=s.observations,l=s.loadedPartitionKeys,d=s.loading,h=s.xAxis,m=(0,Oe.L)(h,a,o,l),f=x.useMemo((function(){return new Set([h])}),[h]);return d?(0,Y.jsxs)(c.x,{children:[(0,Y.jsx)(c.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:{side:"bottom",color:p.w.KeylineGray,width:1},padding:{vertical:16,left:24,right:12},style:{marginBottom:-1},children:(0,Y.jsx)(D.pm,{children:"Asset plots"})}),(0,Y.jsx)(c.x,{padding:{vertical:48},children:(0,Y.jsx)(u.$,{purpose:"page"})})]}):(0,Y.jsxs)(c.x,{children:[(0,Y.jsxs)(c.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:{side:"bottom",color:p.w.KeylineGray,width:1},padding:{vertical:16,left:24,right:12},style:{marginBottom:-1},children:[(0,Y.jsx)(D.pm,{children:"Asset plots"}),n?(0,Y.jsx)("div",{style:{margin:"-6px 0 "},children:(0,Y.jsx)(G.h,{activeItems:f,buttons:[{id:"partition",label:"Partitions",icon:"partition"},{id:"time",label:"Events",icon:"materialization"}],onClick:function(e){return r("time"===e?(0,v.Z)((0,v.Z)({},i),{},{partition:void 0,time:""}):(0,v.Z)((0,v.Z)({},i),{},{partition:"",time:void 0}))}})}):null]}),(0,Y.jsx)(Bt.l,{xAxis:h,groups:m})]})},$t=n(86562),Jt=n(46856),qt=n(25960),Qt=x.memo((function(e){var t=e.numRequested,n=e.numSkipped,i=e.numDiscarded,r=e.isPartitionedAsset,s=e.selected,a=[t||r?(0,Y.jsx)(D.YS,{color:s?p.w.Blue700:t?p.w.Green700:p.w.Gray700,children:r?"".concat((0,qt.J)(t)," launched"):"Launched"},"requested"):null,n||r?(0,Y.jsx)(D.YS,{color:s?p.w.Blue700:n?p.w.Yellow700:p.w.Gray700,children:r?"".concat((0,qt.J)(n)," skipped"):"Skipped"},"skipped"):null,i||r?(0,Y.jsx)(D.YS,{color:s?p.w.Blue700:i?p.w.Red700:p.w.Gray700,children:r?"".concat((0,qt.J)(i)," discarded"):"Discarded"},"discarded"):null].filter((function(e){return!!e}));return(0,Y.jsx)(c.x,{flex:{direction:"row",gap:2,alignItems:"center"},style:{whiteSpace:"nowrap"},children:a.map((function(e,t){return[e,(0,Y.jsx)(D.YS,{color:s?p.w.Blue200:p.w.Gray200,children:"/"},"spacer-".concat(t))]})).flat().slice(0,-1)})})),Yt=function(e){var t=e.assetHasDefinedPartitions,n=e.evaluations,i=e.evaluationsIncludingEmpty,r=e.paginationProps,s=e.onSelectEvaluation,a=e.selectedEvaluation;return(0,Y.jsxs)(c.x,{flex:{direction:"column",grow:1},style:{overflowY:"auto"},children:[(0,Y.jsx)(Xt,{assetHasDefinedPartitions:t,evaluationsIncludingEmpty:i,onSelectEvaluation:s,selectedEvaluation:a}),n.length?(0,Y.jsx)(en,{children:(0,Y.jsx)($t.b$,(0,v.Z)({},r))}):null]})},Xt=function(e){var t=e.assetHasDefinedPartitions,n=e.evaluationsIncludingEmpty,i=e.onSelectEvaluation,r=e.selectedEvaluation;return(0,Y.jsxs)(c.x,{padding:{vertical:8,horizontal:12},style:{flex:1,minHeight:0,overflowY:"auto"},flex:{grow:1,direction:"column"},children:[n.map((function(e){var n=(null===r||void 0===r?void 0:r.evaluationId)===e.evaluationId;if("no_conditions_met"===e.__typename)return(0,Y.jsx)(tn,{onClick:function(){i(e)},$selected:n,children:(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:4},style:{width:"100%"},children:[(0,Y.jsx)("div",{children:e.startTimestamp?1===e.amount?"1 evaluation":"".concat((0,qt.J)(e.amount)," evaluations"):(0,Y.jsx)(Y.Fragment,{children:"now"===e.endTimestamp?"Before now":(0,Y.jsxs)(Y.Fragment,{children:["Before ",(0,Y.jsx)(Jt.v,{timestamp:e.endTimestamp})]})})}),(0,Y.jsx)(D.YS,{color:n?p.w.Blue700:p.w.Gray700,children:"No conditions met"})]})},"skip-".concat(e.evaluationId));var s=e.numRequested,a=e.numSkipped,o=e.numDiscarded;return(0,Y.jsx)(tn,{onClick:function(){i(e)},$selected:n,children:(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,Y.jsx)(Jt.v,{timestamp:e.timestamp}),(0,Y.jsx)(Qt,{numRequested:s,numSkipped:a,numDiscarded:o,isPartitionedAsset:t,selected:n})]})},"skip-".concat(e.timestamp))})),(0,Y.jsx)(c.x,{border:{side:"top",color:p.w.KeylineGray,width:1},padding:{vertical:20,horizontal:12},margin:{top:12},children:(0,Y.jsx)(D.YS,{children:"Evaluations are retained for 1 week"})})]})},en=B.ZP.div.withConfig({displayName:"AutomaterializeLeftPanel__PaginationWrapper",componentId:"sc-w8e3cp-0"})(["position:sticky;bottom:0;background:",";border-right:1px solid ",";box-shadow:inset 0 1px ",";margin-top:-1px;padding-bottom:16px;padding-top:16px;> *{margin-top:0;}"],p.w.White,p.w.KeylineGray,p.w.KeylineGray),tn=B.ZP.button.withConfig({displayName:"AutomaterializeLeftPanel__EvaluationListItem",componentId:"sc-w8e3cp-1"})(["background-color:",";border:none;border-radius:8px;color:",";cursor:pointer;margin:2px 0;text-align:left;transition:100ms background-color linear,100ms color linear;user-select:none;&:hover{background-color:",";}&:focus,&:active{outline:none;}padding:8px 12px;"],(function(e){return e.$selected?p.w.Blue50:p.w.White}),(function(e){return e.$selected?p.w.Blue700:p.w.Dark}),(function(e){return e.$selected?p.w.Blue50:p.w.Gray10})),nn=n(92014),rn=n(25465),sn=function(e){var t=e.runId,n=(0,o.a)(an,{variables:{runId:t}}),i=n.data;if(n.loading&&!i)return(0,Y.jsx)(z.V,{icon:"spinner",children:"Loading"});var r=null===i||void 0===i?void 0:i.runOrError;return"Run"!==(null===r||void 0===r?void 0:r.__typename)?(0,Y.jsx)(z.V,{icon:"error",intent:"danger",children:"Run not found"}):(0,Y.jsx)(I.rU,{to:"/runs/".concat(t),children:(0,Y.jsx)(rn.Zr,{runId:t,status:r.status})})},an=(0,l.Ps)(Ut||(Ut=(0,a.Z)(["\n  query RunStatusOnlyQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n      }\n    }\n  }\n"]))),on=n(25626),ln=n(80005),dn=n(62638),cn=n(68506),un=n(93015),pn=function(e){var t=e.runIds,n=e.partitionKeys,i=e.intent,r=x.useState(!1),s=(0,w.Z)(r,2),a=s[0],o=s[1],l=x.useState(""),d=(0,w.Z)(l,2),u=d[0],h=d[1],m=u.toLocaleLowerCase(),f=n.length,g=x.useMemo((function(){return""===m?n:n.filter((function(e){return e.toLocaleLowerCase().includes(m)}))}),[n,m]),y=x.useMemo((function(){return t?1===f?"1 partition launched":"".concat(f," partitions launched"):1===f?"1 partition":"".concat(f," partitions")}),[f,t]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Y.jsx)(z.V,{intent:i,children:y}),(0,Y.jsx)(ue.Z,{onClick:function(){return o(!0)},children:(0,Y.jsx)(D.YS,{children:"View details"})})]}),(0,Y.jsxs)(pe.Vq,{isOpen:a,onClose:function(){return o(!1)},style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,Y.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[(0,Y.jsx)("div",{style:{fontSize:"16px"},children:1===f?"1 partition":"".concat(f," partitions")}),f>0?(0,Y.jsx)(st.oi,{icon:"search",value:u,onChange:function(e){return h(e.target.value)},placeholder:"Filter by partition\u2026",style:{width:"252px"}}):null]}),(0,Y.jsx)("div",{style:{height:"272px",overflow:"hidden"},children:u&&!g.length?(0,Y.jsx)(hn,{queryString:u}):t?(0,Y.jsx)(xn,{runIds:t,partitionKeys:g,intent:i}):(0,Y.jsx)(mn,{partitionKeys:n})}),(0,Y.jsx)(pe.cN,{topBorder:!0,children:(0,Y.jsx)(xe.zx,{onClick:function(){return o(!1)},children:"Close"})})]})]})},xn=function(e){var t=e.runIds,n=e.partitionKeys,i=(0,o.a)(fn,{variables:{filter:{runIds:t}}}),r=i.data,s=i.loading,a=null===r||void 0===r?void 0:r.runsOrError;if(!a)return s?(0,Y.jsxs)(c.x,{padding:32,flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,Y.jsx)(u.$,{purpose:"body-text"}),(0,Y.jsx)("div",{children:"Loading partitions and runs\u2026"})]}):(0,Y.jsx)(c.x,{padding:32,children:(0,Y.jsx)(K.t,{icon:"error",title:"Unexpected error",description:"An unexpected error occurred"})});if("PythonError"===a.__typename)return(0,Y.jsx)(c.x,{padding:32,children:(0,Y.jsx)(K.t,{icon:"error",title:"Python error",description:(0,Y.jsx)(xe.zx,{onClick:function(){(0,ln._)({title:"Python error",body:(0,Y.jsx)(nn.T9,{error:a})})},children:"View error"})})});if("InvalidPipelineRunsFilterError"===a.__typename||!a.results.length)return(0,Y.jsx)(c.x,{padding:32,children:(0,Y.jsx)(K.t,{icon:"error",title:"Runs not found",description:"No runs found for these partitions"})});var l=a.results,d=Object.fromEntries(l.map((function(e){var t=e.tags.find((function(e){return e.key===cn.H.Partition}));return t?[t.value,e]:null})).filter((function(e){return!!e})));return(0,Y.jsx)(mn,{partitionKeys:n,runsByPartitionKey:d})},hn=function(e){var t=e.queryString;return(0,Y.jsx)(c.x,{padding:32,children:(0,Y.jsx)(K.t,{icon:"search",title:"No matching partitions",description:(0,Y.jsxs)(Y.Fragment,{children:["No matching partitions for ",(0,Y.jsx)("strong",{children:t})]})})})},mn=function(e){var t=e.partitionKeys,n=e.runsByPartitionKey,i=x.useRef(null),r=(0,on.useVirtualizer)({count:t.length,getScrollElement:function(){return i.current},estimateSize:function(){return 40},overscan:10}),s=r.getTotalSize(),a=r.getVirtualItems(),o=!!n;return(0,Y.jsx)(un.W2,{ref:i,style:{padding:"8px 24px"},children:(0,Y.jsx)(un.Nh,{$totalHeight:s,children:a.map((function(e){var i=e.index,r=e.key,s=e.size,a=e.start,l=t[i],d=n?n[l]:null;return(0,Y.jsx)(un.X2,{$height:s,$start:a,children:(0,Y.jsxs)(c.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:i<t.length-1?{side:"bottom",width:1,color:p.w.KeylineGray}:null,children:[(0,Y.jsx)("div",{children:t[i]}),o?(0,Y.jsx)("div",{children:d?(0,Y.jsx)(gn,{to:"/runs/".concat(d.id),children:(0,Y.jsx)(rn.Zr,{runId:d.id,status:d.status})}):(0,Y.jsx)(z.V,{children:"Run not found"})}):null]})},r)}))})})},fn=(0,l.Ps)(Vt||(Vt=(0,a.Z)(["\n  query RunStatusAndPartitionKey($filter: RunsFilter) {\n    runsOrError(filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunStatusAndTagsFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment RunStatusAndTagsFragment on Run {\n    id\n    status\n    tags {\n      key\n      value\n    }\n  }\n\n  ","\n"])),dn.B),gn=(0,B.ZP)(I.rU).withConfig({displayName:"AutomaterializeRequestedPartitionsLink__TagLink",componentId:"sc-1xvk710-0"})([":focus{outline:none;}"]),yn=function(e){var t=e.header,n=e.details,i=e.headerRightSide,r=e.children,s=x.useState(!1),a=(0,w.Z)(s,2),o=a[0],l=a[1];return(0,Y.jsxs)(c.x,{flex:{direction:"column"},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[(0,Y.jsx)(jn,{onClick:function(){return l(!o)},children:(0,Y.jsxs)(c.x,{flex:{justifyContent:"space-between",gap:12,grow:1},padding:{vertical:8,horizontal:16},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:4,grow:1},children:[(0,Y.jsx)(L.JO,{name:"arrow_drop_down",style:{transform:o?"rotate(-90deg)":"rotate(0deg)"}}),(0,Y.jsx)(D.pm,{children:t}),(0,Y.jsx)(Et.u,{content:n,placement:"top",children:(0,Y.jsx)(L.JO,{color:p.w.Gray500,name:"info"})})]}),i]})}),o?null:(0,Y.jsx)(c.x,{padding:{vertical:12,left:32,right:16},children:r})]})},jn=B.ZP.button.withConfig({displayName:"CollapsibleSection__SectionHeader",componentId:"sc-z8h3bp-0"})(["background-color:",";border:0;cursor:pointer;padding:0;margin:0;:focus{outline:none;}"],p.w.White),vn=n(34287),wn=function(e){var t=e.isOpen,n=e.setIsOpen,i=e.header,r=e.content;return(0,Y.jsxs)(pe.Vq,{isOpen:t,onClose:function(){return n(!1)},style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[i,(0,Y.jsx)("div",{style:{height:"272px",overflow:"hidden"},children:r}),(0,Y.jsx)(pe.cN,{topBorder:!0,children:(0,Y.jsx)(xe.zx,{onClick:function(){return n(!1)},children:"Close"})})]})},bn=function(e){var t=e.title,n=e.showSearch,i=e.placeholder,r=e.queryString,s=e.setQueryString;return(0,Y.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[(0,Y.jsx)("div",{style:{fontSize:"16px"},children:t}),n?(0,Y.jsx)(st.oi,{icon:"search",value:r,onChange:function(e){return s(e.target.value)},placeholder:i,style:{width:"252px"}}):null]})},En=function(e){var t=e.title,n=e.description;return(0,Y.jsx)(c.x,{padding:32,children:(0,Y.jsx)(K.t,{icon:"search",title:t,description:n})})};function Kn(e){var t=e.assetKeys,n=e.renderItem,i=x.useRef(null),r=(0,on.useVirtualizer)({count:t.length,getScrollElement:function(){return i.current},estimateSize:function(){return 40},overscan:10}),s=r.getTotalSize(),a=r.getVirtualItems();return(0,Y.jsx)(un.W2,{ref:i,style:{padding:"8px 24px"},children:(0,Y.jsx)(un.Nh,{$totalHeight:s,children:a.map((function(e){var i=e.index,r=e.key,s=e.size,a=e.start,o=t[i];return(0,Y.jsx)(un.X2,{$height:s,$start:a,children:(0,Y.jsx)(c.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center"},border:i<t.length-1?{side:"bottom",width:1,color:p.w.KeylineGray}:null,children:n(o)})},r)}))})})}var An=function(e){return e[e.Updated=0]="Updated",e[e.WillUpdate=1]="WillUpdate",e}({}),zn=function(e){switch(e){case An.Updated:return"Updated";case An.WillUpdate:return"Will update"}},In=function(e,t){var n=t.toLocaleLowerCase();return x.useMemo((function(){return""===n?e:e.filter((function(e){return e.path.some((function(e){return e.toLowerCase().includes(n)}))}))}),[e,n])},Cn=function(e,t){var n=t.toLocaleLowerCase();return x.useMemo((function(){return""===n?e:e.filter((function(e){return e.toLowerCase().includes(n)}))}),[e,n])},Nn=function(e){var t=e.updatedAssetKeys,n=e.willUpdateAssetKeys,i=x.useState(!1),r=(0,w.Z)(i,2),s=r[0],a=r[1],o=x.useState(""),l=(0,w.Z)(o,2),d=l[0],u=l[1],p=t.length+n.length,h=In(t,d),m=In(n,d),f=h.length+m.length,g=x.useMemo((function(){return[].concat((0,le.Z)(h.map((function(e){return{assetKey:e,detailType:An.Updated}}))),(0,le.Z)(m.map((function(e){return{assetKey:e,detailType:An.WillUpdate}}))))}),[h,m]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ue.Z,{onClick:function(){return a(!0)},children:1===p?"1 parent updated":"".concat(p," parents updated")}),(0,Y.jsx)(wn,{isOpen:s,setIsOpen:a,header:(0,Y.jsx)(bn,{title:1===p?"1 asset":"".concat(p," assets"),showSearch:p>0,placeholder:"Filter by asset key\u2026",queryString:d,setQueryString:u}),content:d&&!f?(0,Y.jsx)(En,{title:"No matching asset keys",description:(0,Y.jsxs)(Y.Fragment,{children:["No matching asset keys for ",(0,Y.jsx)("strong",{children:d})]})}):(0,Y.jsx)(Kn,{assetKeys:g,renderItem:function(e){return(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,Y.jsx)(vn.R,{path:e.assetKey.path,icon:"asset"}),(0,Y.jsxs)("span",{children:["(",zn(e.detailType),")"]})]})}})})]})};function On(e){var t=e.assetKeysByPartition,n=e.renderPartitionDetail,i=e.renderItem,r=x.useState((function(){return new Set([])})),s=(0,w.Z)(r,2),a=s[0],o=s[1],l=x.useRef(null),d=x.useMemo((function(){var e=[];return Object.entries(t).forEach((function(t){var n=(0,w.Z)(t,2),i=n[0],r=n[1],s=a.has(i);if(e.push({type:"partition-name",partitionName:i,expanded:s,assetCount:r.length}),s){var o=r.map((function(e){return{type:"asset-key",assetKey:e}}));e.push.apply(e,(0,le.Z)(o))}})),e}),[t,a]),u=(0,on.useVirtualizer)({count:d.length,getScrollElement:function(){return l.current},estimateSize:function(){return 40},overscan:10}),h=x.useCallback((function(e){o((function(t){var n=new Set(Array.from(t));return t.has(e)?n.delete(e):n.add(e),n}))}),[]),m=u.getTotalSize(),f=u.getVirtualItems();return(0,Y.jsx)(un.W2,{ref:l,style:{padding:"8px 24px"},children:(0,Y.jsx)(un.Nh,{$totalHeight:m,children:f.map((function(e){var t=e.index,r=e.key,s=e.size,a=e.start,o=d[t];return(0,Y.jsx)(un.X2,{$height:s,$start:a,children:(0,Y.jsx)(c.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center"},border:t<d.length-1?{side:"bottom",width:1,color:p.w.KeylineGray}:null,children:"partition-name"===o.type?(0,Y.jsx)(Sn,{partitionName:o.partitionName,expanded:o.expanded,detail:n(o),onToggle:h}):(0,Y.jsx)(c.x,{padding:{left:24},children:i(o.assetKey)})})},r)}))})})}var Pn,Mn,Sn=function(e){var t=e.partitionName,n=e.detail,i=e.expanded,r=e.onToggle;return(0,Y.jsxs)(_n,{onClick:function(){return r(t)},children:[(0,Y.jsx)(L.JO,{name:"arrow_drop_down",style:{transform:i?"rotate(0deg)":"rotate(-90deg)"}}),(0,Y.jsx)("div",{children:t}),(0,Y.jsx)("div",{children:n})]})},_n=B.ZP.button.withConfig({displayName:"VirtualizedAssetPartitionListForDialog__PartitionNameButton",componentId:"sc-1htauaj-0"})(["background-color:transparent;cursor:pointer;padding:0;border:0;display:flex;height:100%;width:100%;flex-direction:row;align-items:center;gap:8px;:focus{outline:none;}"]),kn=function(e){var t=e.updatedAssetKeys,n=e.willUpdateAssetKeys,i=x.useState(!1),r=(0,w.Z)(i,2),s=r[0],a=r[1],o=x.useState(""),l=(0,w.Z)(o,2),d=l[0],u=l[1],p=x.useMemo((function(){return Array.from(new Set([].concat((0,le.Z)(Object.keys(t)),(0,le.Z)(Object.keys(n)))))}),[t,n]),h=p.length,m=Cn(p,d),f=x.useMemo((function(){return Object.fromEntries(m.map((function(e){var i,r;return[e,[].concat((0,le.Z)((null===(i=t[e])||void 0===i?void 0:i.map((function(e){return{assetKey:e,detailType:An.Updated}})))||[]),(0,le.Z)((null===(r=n[e])||void 0===r?void 0:r.map((function(e){return{assetKey:e,detailType:An.WillUpdate}})))||[]))]})))}),[t,n,m]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Y.jsx)(z.V,{children:1===h?"1 partition":"".concat(h," partitions")}),(0,Y.jsx)(ue.Z,{onClick:function(){return a(!0)},children:(0,Y.jsx)(D.YS,{children:"View details"})})]}),(0,Y.jsx)(wn,{isOpen:s,setIsOpen:a,header:(0,Y.jsx)(bn,{title:1===h?"1 partition":"".concat(h," partitions"),placeholder:"Filter by partition\u2026",queryString:d,setQueryString:u,showSearch:h>0}),content:d&&!m.length?(0,Y.jsx)(En,{title:"No matching partitions",description:(0,Y.jsxs)(Y.Fragment,{children:["No matching partitions for ",(0,Y.jsx)("strong",{children:d})]})}):(0,Y.jsx)(On,{assetKeysByPartition:f,renderPartitionDetail:function(e){var t=e.assetCount;return 1===t?"(1 parent updated)":"(".concat(t," parents updated)")},renderItem:function(e){return(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,Y.jsx)(vn.R,{path:e.assetKey.path,icon:"asset"}),(0,Y.jsxs)("span",{children:["(",zn(e.detailType),")"]})]})}})})]})},Zn=function(e){var t=e.assetKeys,n=x.useState(!1),i=(0,w.Z)(n,2),r=i[0],s=i[1],a=x.useState(""),o=(0,w.Z)(a,2),l=o[0],d=o[1],c=t.length,u=In(t,l);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ue.Z,{onClick:function(){return s(!0)},children:1===c?"Waiting on 1 asset":"Waiting on ".concat(c," assets")}),(0,Y.jsx)(wn,{isOpen:r,setIsOpen:s,header:(0,Y.jsx)(bn,{title:1===c?"1 asset":"".concat(c," assets"),queryString:l,setQueryString:d,showSearch:c>0,placeholder:"Filter by asset key\u2026"}),content:l&&!u.length?(0,Y.jsx)(En,{title:"No matching asset keys",description:(0,Y.jsxs)(Y.Fragment,{children:["No matching asset keys for ",(0,Y.jsx)("strong",{children:l})]})}):(0,Y.jsx)(Kn,{assetKeys:u,renderItem:function(e){return(0,Y.jsx)(vn.R,{path:e.path,icon:"asset"})}})})]})},Rn=function(e){var t=e.assetKeysByPartition,n=x.useState(!1),i=(0,w.Z)(n,2),r=i[0],s=i[1],a=x.useState(""),o=(0,w.Z)(a,2),l=o[0],d=o[1],u=Object.keys(t),p=u.length,h=Cn(u,l),m=x.useMemo((function(){return Object.fromEntries(h.map((function(e){return[e,t[e]]})))}),[t,h]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,Y.jsx)(z.V,{intent:"warning",children:1===p?"1 partition":"".concat(p," partitions")}),(0,Y.jsx)(ue.Z,{onClick:function(){return s(!0)},children:(0,Y.jsx)(D.YS,{children:"View details"})})]}),(0,Y.jsx)(wn,{isOpen:r,setIsOpen:s,header:(0,Y.jsx)(bn,{title:1===p?"1 partition":"".concat(p," partitions"),queryString:l,setQueryString:d,showSearch:p>0,placeholder:"Filter by partition\u2026"}),content:l&&!h.length?(0,Y.jsx)(En,{title:"No matching partitions",description:(0,Y.jsxs)(Y.Fragment,{children:["No matching partitions for ",(0,Y.jsx)("strong",{children:l})]})}):(0,Y.jsx)(On,{assetKeysByPartition:m,renderPartitionDetail:function(e){var t=e.assetCount;return 1===t?"(Waiting on 1 asset)":"(Waiting on ".concat(t," assets)")},renderItem:function(e){return(0,Y.jsx)(vn.R,{path:e.path,icon:"asset"})}})})]})},Dn=function(e){var t=e.text,n=e.met,i=e.rightElement;return(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},style:{height:24},children:[(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,Y.jsx)(L.JO,{name:n?"done":"close",color:n?p.w.Dark:p.w.Gray500}),(0,Y.jsx)("div",{style:{color:n?p.w.Dark:p.w.Gray500},children:t})]}),i]})},Gn=(0,Y.jsx)("div",{style:{color:p.w.Gray400},children:"\u2013"}),Ln=function(e){var t=e.conditionResults,n=e.conditionToPartitions,i=e.maxMaterializationsPerMinute,r=e.parentOutdatedWaitingOnAssetKeys,s=e.parentUpdatedAssetKeys,a=e.parentWillUpdateAssetKeys,o=function(e,t){return null!==e&&void 0!==e&&e.length?(0,Y.jsx)(pn,{partitionKeys:e,intent:t}):Gn};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(yn,{header:"Materialization conditions met",details:"These conditions trigger materializations, unless they are overriden by a skip or discard condition.",children:(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,Y.jsx)(Dn,{text:"Materialization is missing",met:t.has("MissingAutoMaterializeCondition"),rightElement:o(n.MissingAutoMaterializeCondition)}),(0,Y.jsx)(Dn,{text:"Upstream data has changed since latest materialization",met:t.has("ParentMaterializedAutoMaterializeCondition"),rightElement:Object.keys(s).length||Object.keys(a).length?(0,Y.jsx)(kn,{updatedAssetKeys:s,willUpdateAssetKeys:a}):Gn}),(0,Y.jsx)(Dn,{text:"Required to meet this asset's freshness policy",met:t.has("FreshnessAutoMaterializeCondition"),rightElement:o(n.FreshnessAutoMaterializeCondition)}),(0,Y.jsx)(Dn,{text:"Required to meet a downstream freshness policy",met:t.has("DownstreamFreshnessAutoMaterializeCondition"),rightElement:o(n.DownstreamFreshnessAutoMaterializeCondition)})]})}),(0,Y.jsx)(yn,{header:"Skip conditions met",details:"Skipped partitions will be materialized in a future evaluation, once the skip condition is resolved.",children:(0,Y.jsx)(Dn,{text:"Waiting on upstream data",met:t.has("ParentOutdatedAutoMaterializeCondition"),rightElement:Object.keys(r).length>0?(0,Y.jsx)(Rn,{assetKeysByPartition:r}):Gn})}),(0,Y.jsx)(yn,{header:"Discard conditions met",details:"Discarded partitions will not be materialized unless new materialization conditions occur. You may want to run a manual backfill to respond to the materialize conditions.",children:(0,Y.jsx)(Dn,{text:"Exceeds ".concat(1===i?"1 materialization":"".concat(i," materializations")," per minute"),met:t.has("MaxMaterializationsExceededAutoMaterializeCondition"),rightElement:o(n.MaxMaterializationsExceededAutoMaterializeCondition,"danger")})})]})},Tn=function(e){var t=e.conditionResults,n=e.parentOutdatedWaitingOnAssetKeys,i=e.parentUpdatedAssetKeys,r=e.parentWillUpdateAssetKeys;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(yn,{header:"Materialization conditions met",details:"These conditions trigger a materialization, unless they are blocked by a skip or discard condition.",children:(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,Y.jsx)(Dn,{text:"Materialization is missing",met:t.has("MissingAutoMaterializeCondition"),rightElement:Gn}),(0,Y.jsx)(Dn,{text:"Upstream data has changed since latest materialization",met:t.has("ParentMaterializedAutoMaterializeCondition"),rightElement:i.length||r.length?(0,Y.jsx)(Nn,{updatedAssetKeys:i,willUpdateAssetKeys:r}):Gn}),(0,Y.jsx)(Dn,{text:"Required to meet this asset's freshness policy",met:t.has("FreshnessAutoMaterializeCondition"),rightElement:Gn}),(0,Y.jsx)(Dn,{text:"Required to meet a downstream freshness policy",met:t.has("DownstreamFreshnessAutoMaterializeCondition"),rightElement:Gn})]})}),(0,Y.jsx)(yn,{header:"Skip conditions met",details:"Skips will materialize in a future evaluation, once the skip condition is resolved.",children:(0,Y.jsx)(Dn,{text:"Waiting on upstream data",met:t.has("ParentOutdatedAutoMaterializeCondition"),rightElement:n.length?(0,Y.jsx)(Zn,{assetKeys:n}):Gn})})]})},Fn=function(e){var t=e.selectedEvaluation,n=x.useMemo((function(){return new Set(((null===t||void 0===t?void 0:t.conditions)||[]).map((function(e){return e.__typename})))}),[t]),i=x.useMemo((function(){if(null===t||void 0===t||!t.conditions)return{waitingOnAssetKeys:[],parentUpdatedAssetKeys:[],parentWillUpdateAssetKeys:[]};var e=[],n=[],i=[];return t.conditions.forEach((function(t){"ParentOutdatedAutoMaterializeCondition"===t.__typename?e.push.apply(e,(0,le.Z)(t.waitingOnAssetKeys||[])):"ParentMaterializedAutoMaterializeCondition"===t.__typename&&(n.push.apply(n,(0,le.Z)(t.updatedAssetKeys||[])),i.push.apply(i,(0,le.Z)(t.willUpdateAssetKeys||[])))})),{waitingOnAssetKeys:e,parentUpdatedAssetKeys:n,parentWillUpdateAssetKeys:i}}),[t]);return(0,Y.jsxs)(c.x,{flex:{direction:"column",grow:1},children:[(0,Y.jsxs)(c.x,{style:{flex:"0 0 48px"},padding:{horizontal:16},border:{side:"bottom",width:1,color:p.w.KeylineGray},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,Y.jsx)(D.pm,{children:"Result"}),(0,Y.jsx)("div",{children:function(){var e="AutoMaterializeAssetEvaluationRecord"===(null===t||void 0===t?void 0:t.__typename)?t.runIds:[];return 0!==e.length&&null!==t&&void 0!==t&&t.conditions?(0,Y.jsx)(sn,{runId:e[0]}):null}()})]}),(0,Y.jsx)(Tn,{conditionResults:n,parentOutdatedWaitingOnAssetKeys:i.waitingOnAssetKeys,parentUpdatedAssetKeys:i.parentUpdatedAssetKeys,parentWillUpdateAssetKeys:i.parentWillUpdateAssetKeys})]})},Wn=function(e){var t=e.selectedEvaluation,n=e.maxMaterializationsPerMinute,i=x.useMemo((function(){var e=null===t||void 0===t?void 0:t.conditions;return null!==e&&void 0!==e&&e.length?Object.fromEntries(e.map((function(e){var t=e.__typename,n=e.partitionKeysOrError;return"PartitionKeys"===(null===n||void 0===n?void 0:n.__typename)?[t,n.partitionKeys]:null})).filter((function(e){return!!e}))):{}}),[t]),r=x.useMemo((function(){return new Set(Object.keys(i))}),[i]),s=x.useMemo((function(){var e=null===t||void 0===t?void 0:t.conditions,n={},i={},r={};return null!==e&&void 0!==e&&e.length&&e.forEach((function(e){if("ParentOutdatedAutoMaterializeCondition"===e.__typename){var t=e.waitingOnAssetKeys,s=e.partitionKeysOrError;"PartitionKeys"===(null===s||void 0===s?void 0:s.__typename)&&s.partitionKeys.forEach((function(e){var i=(0,le.Z)(n[e]||[]);i.push.apply(i,(0,le.Z)(t||[])),n[e]=i}))}else if("ParentMaterializedAutoMaterializeCondition"===e.__typename){var a=e.updatedAssetKeys,o=e.willUpdateAssetKeys,l=e.partitionKeysOrError;"PartitionKeys"===(null===l||void 0===l?void 0:l.__typename)&&(l.partitionKeys.forEach((function(e){var t=(0,le.Z)(i[e]||[]);t.push.apply(t,(0,le.Z)(a||[])),i[e]=t})),l.partitionKeys.forEach((function(e){var t=(0,le.Z)(r[e]||[]);t.push.apply(t,(0,le.Z)(o||[])),r[e]=t})))}})),{waitingOn:n,parentUpdated:i,parentWillupdate:r}}),[t]);return(0,Y.jsxs)(c.x,{flex:{direction:"column",grow:1},children:[(0,Y.jsxs)(c.x,{style:{flex:"0 0 48px"},padding:{horizontal:16},border:{side:"bottom",width:1,color:p.w.KeylineGray},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,Y.jsx)(D.pm,{children:"Result"}),(0,Y.jsx)("div",{children:function(){var e="AutoMaterializeAssetEvaluationRecord"===(null===t||void 0===t?void 0:t.__typename)?t.runIds:[];if(0===e.length||null===t||void 0===t||!t.conditions)return null;var n=function(e){var t=[],n=[];e.forEach((function(e){var i,r=function(e){switch(e.__typename){case"MissingAutoMaterializeCondition":case"DownstreamFreshnessAutoMaterializeCondition":case"FreshnessAutoMaterializeCondition":case"ParentMaterializedAutoMaterializeCondition":return!0;default:return!1}}(e),s="PartitionKeys"===(null===(i=e.partitionKeysOrError)||void 0===i?void 0:i.__typename)?e.partitionKeysOrError.partitionKeys:[];r?t=t.concat(s):n=n.concat(s)}));var i=new Set(n);return new Set(t.filter((function(e){return!i.has(e)})))}(t.conditions);return(0,Y.jsx)(pn,{runIds:e,partitionKeys:Array.from(n),intent:"success"})}()})]}),(0,Y.jsx)(Ln,{conditionResults:r,conditionToPartitions:i,maxMaterializationsPerMinute:n,parentOutdatedWaitingOnAssetKeys:s.waitingOn,parentUpdatedAssetKeys:s.parentUpdated,parentWillUpdateAssetKeys:s.parentWillupdate})]})},Un=(0,l.Ps)(Pn||(Pn=(0,a.Z)(["\n  query GetEvaluationsQuery($assetKey: AssetKeyInput!, $limit: Int!, $cursor: String) {\n    autoMaterializeAssetEvaluationsOrError(assetKey: $assetKey, limit: $limit, cursor: $cursor) {\n      ... on AutoMaterializeAssetEvaluationRecords {\n        currentEvaluationId\n        records {\n          id\n          ...AutoMaterializeEvaluationRecordItem\n        }\n      }\n      ... on AutoMaterializeAssetEvaluationNeedsMigrationError {\n        message\n      }\n    }\n  }\n\n  fragment AutoMaterializeEvaluationRecordItem on AutoMaterializeAssetEvaluationRecord {\n    id\n    evaluationId\n    numRequested\n    numSkipped\n    numDiscarded\n    timestamp\n    runIds\n    conditions {\n      ...AutoMateralizeWithConditionFragment\n    }\n  }\n\n  fragment AutoMateralizeWithConditionFragment on AutoMaterializeConditionWithDecisionType {\n    decisionType\n    partitionKeysOrError {\n      ... on PartitionKeys {\n        partitionKeys\n      }\n    }\n    ... on ParentOutdatedAutoMaterializeCondition {\n      waitingOnAssetKeys {\n        path\n      }\n    }\n    ... on ParentMaterializedAutoMaterializeCondition {\n      updatedAssetKeys {\n        path\n      }\n      willUpdateAssetKeys {\n        path\n      }\n    }\n  }\n"]))),Vn=function(e){var t,n,i=e.assetKey,r=e.assetHasDefinedPartitions,s=e.maxMaterializationsPerMinute,a=e.selectedEvaluationId,l=(0,o.a)(Un,{variables:{assetKey:i,cursor:a?"".concat(a+1):void 0,limit:2}}),d=l.data,u=l.loading,x=l.error;if(u&&!d)return(0,Y.jsx)(c.x,{flex:{direction:"column",grow:1},children:(0,Y.jsx)(c.x,{style:{flex:"0 0 48px"},border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{horizontal:16},flex:{alignItems:"center",justifyContent:"space-between"},children:(0,Y.jsx)(D.pm,{children:"Result"})})});if(x)return(0,Y.jsx)(c.x,{flex:{direction:"column",grow:1},children:(0,Y.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},padding:24,children:(0,Y.jsx)(nn.Vx,{children:JSON.stringify(x)})})});if("AutoMaterializeAssetEvaluationNeedsMigrationError"===(null===d||void 0===d||null===(t=d.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename))return(0,Y.jsx)(c.x,{flex:{direction:"column",grow:1},children:(0,Y.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,Y.jsx)(K.t,{icon:"error",title:"Error",description:d.autoMaterializeAssetEvaluationsOrError.message})})});var h=(null===d||void 0===d||null===(n=d.autoMaterializeAssetEvaluationsOrError)||void 0===n?void 0:n.records)||[],m=function(){var e=h.find((function(e){return e.evaluationId===a}));return e||{__typename:"no_conditions_met",evaluationId:0,amount:0,endTimestamp:0,startTimestamp:0}}();return r?(0,Y.jsx)(Wn,{selectedEvaluation:m,maxMaterializationsPerMinute:s}):(0,Y.jsx)(Fn,{selectedEvaluation:m})},Bn=function(e){var t=e.assetKey,n=e.setMaxMaterializationsPerMinute,i=(0,o.a)(Jn,{variables:{assetKey:t}});(0,C.C4)(i,C.dT);var r=i.data,s=i.error;return x.useEffect((function(){if("AssetNode"===(null===r||void 0===r?void 0:r.assetNodeOrError.__typename)){var e,t=null===(e=r.assetNodeOrError.autoMaterializePolicy)||void 0===e?void 0:e.maxMaterializationsPerMinute;"number"===typeof t&&n(t)}}),[r,n]),(0,Y.jsxs)(c.x,{flex:{direction:"column"},style:{width:"294px",height:"100%"},border:{side:"left",width:1,color:p.w.KeylineGray},children:[(0,Y.jsx)(c.x,{padding:16,border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Overview"})}),(0,Y.jsx)("div",{style:{overflowY:"auto"},children:s?(0,Y.jsx)(c.x,{padding:24,children:(0,Y.jsx)(nn.Vx,{children:JSON.stringify(s)})}):r?"AssetNotFoundError"===r.assetNodeOrError.__typename?(0,Y.jsx)(h.l_,{to:"/assets"}):(0,Y.jsxs)(Y.Fragment,{children:[r.assetNodeOrError.autoMaterializePolicy?(0,Y.jsx)(Hn,{title:(0,Y.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:["Auto-materialize policy",(0,Y.jsx)(Ue.W,{policy:r.assetNodeOrError.autoMaterializePolicy})]}),children:(0,Y.jsx)(D.uT,{style:{flex:1},children:(0,Ue.r)(r.assetNodeOrError.autoMaterializePolicy)})}):(0,Y.jsx)(c.x,{padding:8,children:(0,Y.jsx)(K.t,{title:"No auto-materialize policy found",shrinkable:!0,description:(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,Y.jsx)("div",{children:"An auto-materialize policy specifies how Dagster should attempt to keep an asset up-to-date."}),(0,Y.jsx)("div",{children:(0,Y.jsx)(xe.fr,{href:"https://docs.dagster.io/_apidocs/assets#dagster.AutoMaterializePolicy",target:"_blank",rel:"noreferrer",icon:(0,Y.jsx)(L.JO,{name:"open_in_new"}),children:"View documentation"})})]})})}),r.assetNodeOrError.freshnessPolicy?(0,Y.jsxs)(Hn,{title:"Freshness policy",children:[(0,Y.jsx)($n,{title:"Maximum lag minutes",value:r.assetNodeOrError.freshnessPolicy.maximumLagMinutes}),(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:8},children:["This asset will be considered late if it is not materialized within"," ",r.assetNodeOrError.freshnessPolicy.maximumLagMinutes," minutes of it\u2019s upstream dependencies.",(0,Y.jsx)(I.rU,{to:(0,Le.p)(t,{view:"lineage",lineageScope:"upstream"}),children:"View upstream assets"})]})]}):(0,Y.jsx)(c.x,{padding:8,children:(0,Y.jsx)(K.t,{title:"No freshness policy found",shrinkable:!0,description:(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,Y.jsx)("div",{children:"A FreshnessPolicy specifies how up-to-date you want a given asset to be."}),(0,Y.jsx)("div",{children:(0,Y.jsx)(xe.fr,{href:"https://docs.dagster.io/_apidocs/assets#dagster.FreshnessPolicy",target:"_blank",rel:"noreferrer",icon:(0,Y.jsx)(L.JO,{name:"open_in_new"}),children:"View documentation"})})]})})})]}):(0,Y.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,Y.jsx)(u.$,{purpose:"section"})})})]})},Hn=function(e){var t=e.title,n=e.children;return(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:12},border:{side:"bottom",width:1,color:p.w.KeylineGray},padding:{vertical:12,horizontal:16},children:[(0,Y.jsx)(D.pm,{children:t}),n]})},$n=function(e){var t=e.title,n=e.value;return(0,Y.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,Y.jsx)("div",{children:t}),(0,Y.jsx)(D.fv,{style:{fontSize:"16px",fontWeight:500},children:n})]})},Jn=(0,l.Ps)(Mn||(Mn=(0,a.Z)(["\n  query GetPolicyInfoQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        freshnessPolicy {\n          maximumLagMinutes\n          cronSchedule\n          cronScheduleTimezone\n        }\n        autoMaterializePolicy {\n          policyType\n          maxMaterializationsPerMinute\n        }\n      }\n    }\n  }\n"]))),qn=n(4774);var Qn,Yn=function(e){var t,n=e.assetKey,i=e.assetHasDefinedPartitions,r=function(e){var t=e.assetKey;return(0,qn.l)({nextCursorForResult:function(e){var t,n;if("AutoMaterializeAssetEvaluationRecords"===(null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename))return null===(n=e.autoMaterializeAssetEvaluationsOrError.records[29])||void 0===n?void 0:n.evaluationId.toString()},getResultArray:function(e){var t;return"AutoMaterializeAssetEvaluationRecords"===(null===e||void 0===e||null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)?e.autoMaterializeAssetEvaluationsOrError.records:[]},variables:{assetKey:t},query:Un,pageSize:30})}({assetKey:n}),s=r.queryResult,a=r.paginationProps;(0,C.C4)(s,C.dT);var o=x.useMemo((function(){var e,t,n;return"AutoMaterializeAssetEvaluationRecords"===(null===(e=s.data)||void 0===e||null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)?{evaluations:null===(n=s.data)||void 0===n?void 0:n.autoMaterializeAssetEvaluationsOrError.records,currentEvaluationId:s.data.autoMaterializeAssetEvaluationsOrError.currentEvaluationId}:{evaluations:[],currentEvaluationId:null}}),[null===(t=s.data)||void 0===t?void 0:t.autoMaterializeAssetEvaluationsOrError]),l=o.evaluations,d=o.currentEvaluationId,u=!a.hasPrevCursor,h=!a.hasNextCursor,m=s.loading&&!s.data,f=x.useMemo((function(){return function(e){var t,n=e.isLoading,i=e.currentEvaluationId,r=e.evaluations,s=e.isFirstPage,a=e.isLastPage;if(n)return[];var o=[],l=s&&null!==i?i:(null===(t=r[0])||void 0===t?void 0:t.evaluationId)||1;if(r.forEach((function(e,t){var n=r[t-1];e.evaluationId!==l&&o.push({__typename:"no_conditions_met",evaluationId:l,amount:l-e.evaluationId,endTimestamp:null!==n&&void 0!==n&&n.timestamp?(null===n||void 0===n?void 0:n.timestamp)-60:"now",startTimestamp:e.timestamp+60}),o.push(e),l=e.evaluationId-1})),a){var d=r[r.length-1];o.push({__typename:"no_conditions_met",evaluationId:l,amount:l,endTimestamp:null!==d&&void 0!==d&&d.timestamp?(null===d||void 0===d?void 0:d.timestamp)-60:"now",startTimestamp:0})}return o}({currentEvaluationId:d,evaluations:l,isFirstPage:u,isLastPage:h,isLoading:m})}),[d,l,u,h,m]),g=(0,_.q)({queryKey:"evaluation",decode:function(e){var t=parseInt(e.evaluation);return isNaN(t)?void 0:t}}),y=(0,w.Z)(g,2),j=y[0],v=y[1],b=x.useMemo((function(){return void 0===j&&u?f[0]:f.find((function(e){return e.evaluationId===j}))}),[j,u,f]),E=x.useState(1),K=(0,w.Z)(E,2),A=K[0],z=K[1];return(0,Y.jsxs)(Xn,{style:{flex:1,minHeight:0,color:p.w.Gray700,overflow:"hidden"},flex:{direction:"row"},children:[(0,Y.jsxs)(c.x,{flex:{direction:"column",grow:1},children:[(0,Y.jsx)(c.x,{flex:{alignItems:"center"},padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(D.pm,{children:"Evaluation history"})}),(0,Y.jsxs)(c.x,{flex:{direction:"row"},style:{flex:1,minHeight:0},children:[(0,Y.jsx)(c.x,{border:{side:"right",color:p.w.KeylineGray,width:1},flex:{grow:0,direction:"column"},style:{flex:"0 0 296px"},children:(0,Y.jsx)(Yt,{assetHasDefinedPartitions:i,evaluations:l,evaluationsIncludingEmpty:f,paginationProps:a,onSelectEvaluation:function(e){v(e.evaluationId)},selectedEvaluation:b})}),(0,Y.jsx)(c.x,{flex:{grow:1},style:{minHeight:0,overflowY:"auto"},children:(0,Y.jsx)(Vn,{assetKey:n,assetHasDefinedPartitions:i,selectedEvaluationId:(null===b||void 0===b?void 0:b.evaluationId)||j,maxMaterializationsPerMinute:A})})]})]}),(0,Y.jsx)(c.x,{border:{side:"left",color:p.w.KeylineGray,width:1},children:(0,Y.jsx)(Bn,{assetKey:n,setMaxMaterializationsPerMinute:z})})]})},Xn=(0,B.ZP)(c.x).withConfig({displayName:"AssetAutomaterializePolicyPage__AutomaterializePage",componentId:"sc-14kbp9j-0"})(["a span{white-space:normal;}"]),ei=n(99304),ti=n(77647),ni=function(e){var t,n,i=e.assetKey,r=(0,_.q)({}),s=(0,w.Z)(r,2),a=s[0],o=s[1],l=ai(i),d=l.definition,p=l.definitionQueryResult,h=l.lastMaterialization,m=null!==d&&void 0!==d&&d.partitionDefinition?"partitions":"events",g=a.view||m,y=function(e,t){var n=(0,f.Je)(e);if("definition"===t.view)return{query:'+"'.concat(n,'"+'),requestedDepth:1};if("lineage"===t.view){var i="neighbors"===t.lineageScope?2:5,r=Number(t.lineageDepth)||i,s="+".repeat(r);return{query:"lineage"===t.view&&"upstream"===t.lineageScope?"".concat(s,'"').concat(n,'"'):"lineage"===t.view&&"downstream"===t.lineageScope?'"'.concat(n,'"').concat(s):"".concat(s,'"').concat(n,'"').concat(s),requestedDepth:r}}return{query:'"'.concat(n,'"'),requestedDepth:0}}(i,a),K=(0,O.uc)(y.query,{hideEdgesToNodesOutsideQuery:!0}),A=function(e,t){var n=(0,f.Wu)(t);return x.useMemo((function(){return e?{upstream:Object.values(e.nodes).filter((function(t){var i;return null===(i=e.upstream[n])||void 0===i?void 0:i[(0,f.Wu)(t.assetKey)]})).map((function(e){return e.definition})),downstream:Object.values(e.nodes).filter((function(t){var i;return null===(i=e.downstream[n])||void 0===i?void 0:i[(0,f.Wu)(t.assetKey)]})).map((function(e){return e.definition}))}:{upstream:null,downstream:null}}),[e,n])}(K.assetGraphData,i),z=A.upstream,I=A.downstream,N=null===(t=K.assetGraphData)||void 0===t?void 0:t.nodes[(0,f.Wu)(i)],M=(0,P.le)(K.graphAssetKeys),S=M.liveDataRefreshState,k=M.liveDataByNode,Z=k[(0,f.Wu)(i)],R=null===(n=(null===Z||void 0===Z?void 0:Z.lastMaterialization)||h)||void 0===n?void 0:n.timestamp,D=!a.asOf||Number(R)<=Number(a.asOf),G=Z?(0,Rt.em)(Z):null===h||void 0===h?void 0:h.timestamp,L=(0,C.V5)((0,C.C4)(p,C.dT),S);return(0,Y.jsxs)(c.x,{flex:{direction:"column",grow:1},style:{height:"100%",width:"100%",overflowY:"auto"},children:[(0,Y.jsx)(j.K,{assetKey:i,tags:(0,Y.jsx)(di,{definition:d,liveData:Z,onShowUpstream:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"lineage",lineageScope:"upstream"}))}}),tabs:(0,Y.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,Y.jsxs)(b.mQ,{size:"large",selectedTabId:g,children:[(null===d||void 0===d?void 0:d.partitionDefinition)&&(0,Y.jsx)(b.OK,{id:"partitions",title:"Partitions",onClick:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"partitions"}))}}),(0,Y.jsx)(b.OK,{id:"events",title:"Events",onClick:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"events",partition:void 0}))}}),(0,Y.jsx)(b.OK,{id:"plots",title:"Plots",onClick:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"plots"}))}}),(0,Y.jsx)(b.OK,{id:"definition",title:"Definition",onClick:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"definition"}))},disabled:!d}),(0,Y.jsx)(b.OK,{id:"lineage",title:"Lineage",onClick:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"lineage"}))},disabled:!d}),null!==d&&void 0!==d&&d.autoMaterializePolicy?(0,Y.jsx)(b.OK,{id:"auto-materialize-history",title:"Auto-materialize history",onClick:function(){return o((0,v.Z)((0,v.Z)({},a),{},{view:"auto-materialize-history"}))},disabled:!d}):null]}),L&&(0,Y.jsx)(c.x,{padding:{bottom:8},children:(0,Y.jsx)(C.xi,{refreshState:L})})]}),right:(0,Y.jsx)(c.x,{style:{margin:"-4px 0"},children:d&&d.isObservable?(0,Y.jsx)(ti.y,{intent:"primary",scope:{all:[d],skipAllTerm:!0}}):d&&d.jobNames.length>0&&z?(0,Y.jsx)(gt.XE,{scope:{all:[d]}}):void 0})}),!D&&a.asOf&&(0,Y.jsx)(li,{asOf:a.asOf,hasDefinition:!!d}),(0,Y.jsx)(E.S,{region:"page",resetErrorOnChange:[i,a],children:"definition"===g?p.loading&&!p.previousData?(0,Y.jsx)(ii,{}):d?(0,Y.jsx)(Je,{assetNode:d,upstream:z,downstream:I,dependsOnSelf:!!N&&(0,f.Pz)(N),liveDataByNode:k}):(0,Y.jsx)(ri,{}):"lineage"===g?K.assetGraphData?(0,Y.jsx)(yt,{params:a,setParams:o,assetKey:i,liveDataByNode:k,requestedDepth:y.requestedDepth,assetGraphData:K.assetGraphData,graphQueryItems:K.graphQueryItems}):(0,Y.jsx)(c.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,Y.jsx)(u.$,{purpose:"page"})}):"partitions"===g?p.loading&&!p.previousData?(0,Y.jsx)(ii,{}):(0,Y.jsx)(Lt,{assetKey:i,assetPartitionDimensions:null===d||void 0===d?void 0:d.partitionKeysByDimension.map((function(e){return e.name})),dataRefreshHint:G,params:a,paramsTimeWindowOnly:!!a.asOf,setParams:o}):"events"===g?p.loading&&!p.previousData?(0,Y.jsx)(ii,{}):(0,Y.jsx)(Pe,{assetKey:i,assetNode:d,dataRefreshHint:G,params:a,paramsTimeWindowOnly:!!a.asOf,setParams:o,liveData:d?k[(0,f.Wu)(d.assetKey)]:void 0}):"plots"===g?p.loading&&!p.previousData?(0,Y.jsx)(ii,{}):(0,Y.jsx)(Ht,{assetKey:i,assetHasDefinedPartitions:!(null===d||void 0===d||!d.partitionDefinition),params:a,setParams:o}):"auto-materialize-history"===g?p.loading&&!p.previousData?(0,Y.jsx)(ii,{}):(0,Y.jsx)(Yn,{assetKey:i,assetHasDefinedPartitions:!(null===d||void 0===d||!d.partitionDefinition)}):(0,Y.jsx)("span",{})})]})},ii=function(){return(0,Y.jsx)(c.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,Y.jsx)(u.$,{purpose:"page"})})},ri=function(){return(0,Y.jsx)(c.x,{padding:{vertical:32},children:(0,Y.jsx)(K.t,{title:"No definition",description:"This asset doesn't have a software definition in any of your code locations.",icon:"materialization"})})};var si,ai=function(e){var t=(0,o.a)(oi,{variables:{assetKey:{path:e.path}},notifyOnNetworkStatusChange:!0}),n=(t.data||t.previousData||{}).assetOrError,i=n&&"Asset"===n.__typename?n:null;return{definitionQueryResult:t,definition:(null===i||void 0===i?void 0:i.definition)||null,lastMaterialization:null===i||void 0===i?void 0:i.assetMaterializations[0]}},oi=(0,l.Ps)(Qn||(Qn=(0,a.Z)(["\n  query AssetViewDefinitionQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetMaterializations(limit: 1) {\n          timestamp\n        }\n        definition {\n          id\n          ...AssetViewDefinitionNode\n        }\n      }\n    }\n  }\n\n  fragment AssetViewDefinitionNode on AssetNode {\n    id\n    groupName\n    partitionDefinition {\n      description\n    }\n    partitionKeysByDimension {\n      name\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n\n    ...AssetNodeInstigatorsFragment\n    ...AssetNodeDefinitionFragment\n    ...UnderlyingOpsAssetNodeFragment\n  }\n\n  ","\n  ","\n  ","\n"])),rt,Qe,He.D),li=function(e){var t=e.asOf,n=e.hasDefinition,i=(0,h.TH)(),r=i.pathname,s=i.search,a=new URLSearchParams(s);return a.delete("asOf"),a.set("time",t),(0,Y.jsx)(c.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:(0,Y.jsx)(A.b,{intent:"info",title:(0,Y.jsxs)("span",{children:["This is a historical view of materializations as of"," ",(0,Y.jsx)("span",{style:{fontWeight:600},children:(0,Y.jsx)(N.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})}),"."]}),description:(0,Y.jsx)(I.rU,{to:"".concat(r,"?").concat(a.toString()),children:n?"Show definition and latest materializations":"Show latest materializations"})})})},di=function(e){var t=e.definition,n=e.liveData,i=e.onShowUpstream,r=t?(0,Z.kQ)(t.repository.name,t.repository.location.name):null;return(0,Y.jsxs)(Y.Fragment,{children:[t&&r?(0,Y.jsxs)(z.V,{icon:"asset",children:["Asset in ",(0,Y.jsx)(k.b,{repoAddress:r})]}):(0,Y.jsx)(z.V,{icon:"asset_non_sda",children:"Asset"}),t&&r&&(0,Y.jsx)(it,{assetNode:t,repoAddress:r}),t&&r&&t.groupName&&(0,Y.jsx)(z.V,{icon:"asset_group",children:(0,Y.jsx)(I.rU,{to:(0,R.$U)(r,"/asset-groups/".concat(t.groupName)),children:t.groupName})}),t&&t.autoMaterializePolicy&&(0,Y.jsx)(ei.mM,{}),t&&t.freshnessPolicy&&(0,Y.jsx)(Be.CW,{liveData:n,policy:t.freshnessPolicy,assetKey:t.assetKey}),t&&(0,Y.jsx)(M.d9,{liveData:n,assetKey:t.assetKey,onClick:i,include:"all"}),t&&(0,Y.jsx)(S.hG,{style:{position:"relative"},definition:t,reduceColor:!0})]})},ci=n(31127),ui=function(){var e;(0,m.Px)();var t=(0,h.UO)(),n=(0,h.k6)(),i=(t[0]||"").split("/").filter((function(e){return e})).map(decodeURIComponent),r=(0,o.a)(xi,{skip:0===i.length,variables:{assetKey:{path:i}}});return(0,g.j)(i&&i.length?"Assets: ".concat((0,f.ll)({path:i})):"Assets"),r.loading?(0,Y.jsxs)(d.T,{children:[(0,Y.jsx)(j.K,{assetKey:{path:i}}),(0,Y.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,Y.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,Y.jsx)(u.$,{purpose:"body-text"}),(0,Y.jsx)("div",{style:{color:p.w.Gray600},children:"Loading assets\u2026"})]})})]}):0===i.length||"AssetNotFoundError"===(null===(e=r.data)||void 0===e?void 0:e.assetOrError.__typename)?(0,Y.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,Y.jsx)(j.K,{assetKey:{path:i},right:(0,Y.jsxs)(c.x,{flex:{gap:12,alignItems:"center"},children:[(0,Y.jsx)(j.w,{}),(0,Y.jsx)(y.i,{label:"Reload definitions"})]})}),(0,Y.jsx)(ci.fv,{prefixPath:i,setPrefixPath:function(e){return n.push((0,Le.p)({path:e}))}})]}):(0,Y.jsx)(ni,{assetKey:{path:i}})},pi=ui,xi=(0,l.Ps)(si||(si=(0,a.Z)(["\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"])))},34319:function(e,t,n){"use strict";n.d(t,{i:function(){return h}});var i=n(96234),r=n(44229),s=n(45519),a=n(22e3),o=n(3077),l=n(78193),d=n(35740),c=n(92014),u=n(49009),p=n(99246),x=n(35936),h=function(e){var t=e.label,n=void 0===t?"Reload all":t,h=(0,d.WB)(),m=h.permissions.canReloadWorkspace,f=h.disabledReasons,g=(0,u.Dc)({scope:"workspace",reloadFn:u.rL}),y=g.reloading,j=g.tryReload,v=g.error,w=g.errorLocationId,b=l.useState(!!v),E=(0,i.Z)(b,2),K=E[0],A=E[1];return l.useEffect((function(){return A(!!v)}),[v]),m?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.zx,{onClick:j,icon:(0,x.jsx)(a.JO,{name:"refresh"}),loading:y,intent:"none",children:n}),w?(0,x.jsx)(p.V,{error:v,location:w,reloading:y,onTryReload:j,onDismiss:function(){return A(!1)},isOpen:K}):(0,x.jsxs)(o.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:K,children:[(0,x.jsx)(o.a7,{children:v&&(0,x.jsx)(c.T9,{error:v})}),(0,x.jsx)(o.cN,{children:(0,x.jsx)(s.zx,{onClick:function(){return A(!1)},children:"Dismiss"})})]})]}):(0,x.jsx)(r.u,{content:f.canReloadWorkspace,children:(0,x.jsx)(s.zx,{icon:(0,x.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:n})})}},225:function(e,t,n){var i=n(67268),r=n(86357),s=n(93550),a=n(9747),o=n(4564),l=n(59390);e.exports=function(e,t,n,d){var c=-1,u=r,p=!0,x=e.length,h=[],m=t.length;if(!x)return h;n&&(t=a(t,o(n))),d?(u=s,p=!1):t.length>=200&&(u=l,p=!1,t=new i(t));e:for(;++c<x;){var f=e[c],g=null==n?f:n(f);if(f=d||0!==f?f:0,p&&g===g){for(var y=m;y--;)if(t[y]===g)continue e;h.push(f)}else u(t,g,d)||h.push(f)}return h}},92578:function(e,t,n){var i=n(8945),r=n(70214);e.exports=function(e,t){return i(r(e,t),1)}},67656:function(e,t,n){var i=n(56797),r=n(93348)((function(e,t,n){i(e,n,t)}));e.exports=r},42918:function(e,t,n){var i=n(9747),r=n(39095),s=n(74864),a=n(70002);e.exports=function(e,t){if(null==e)return{};var n=i(a(e),(function(e){return[e]}));return t=r(t),s(e,n,(function(e,n){return t(e,n[0])}))}},97346:function(e,t,n){var i=n(225),r=n(94518),s=n(22482),a=r((function(e,t){return s(e)?i(e,t):[]}));e.exports=a}}]);
//# sourceMappingURL=246.e0cfce97.chunk.js.map